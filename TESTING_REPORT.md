# üß™ –û—Ç—á–µ—Ç –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ Pocket Hedge Fund

## ‚úÖ –°—Ç–∞—Ç—É—Å: –¢–ï–°–¢–´ –°–û–ó–î–ê–ù–´ –ò –ó–ê–ü–£–©–ï–ù–´

–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –ø—Ä–æ–µ–∫—Ç.

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤**: 30
- **–ü—Ä–æ—à–ª–æ**: 17 (57%)
- **–ù–µ –ø—Ä–æ—à–ª–æ**: 13 (43%)
- **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è**: 11

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤

#### ‚úÖ Unit —Ç–µ—Å—Ç—ã - –í–∞–ª–∏–¥–∞—Ü–∏—è (17/20 –ø—Ä–æ—à–ª–æ)
- ‚úÖ `test_validate_amount_valid` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º
- ‚úÖ `test_validate_amount_invalid` - –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ–≤–µ—Ä–Ω—ã—Ö —Å—É–º–º
- ‚úÖ `test_validate_fund_success` - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ–Ω–¥–æ–≤
- ‚úÖ `test_validate_fund_not_found` - –§–æ–Ω–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚úÖ `test_validate_fund_inactive` - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ñ–æ–Ω–¥
- ‚úÖ `test_validate_investor_success` - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤
- ‚ùå `test_validate_investor_inactive` - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä (—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏)
- ‚ùå `test_validate_portfolio_concentration_success` - –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
- ‚úÖ `test_validate_portfolio_concentration_exceeded` - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
- ‚úÖ `test_validate_daily_limit_success` - –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç
- ‚úÖ `test_validate_daily_limit_exceeded` - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞
- ‚úÖ `test_validate_fund_capacity_success` - –ï–º–∫–æ—Å—Ç—å —Ñ–æ–Ω–¥–∞
- ‚úÖ `test_validate_fund_capacity_below_minimum` - –ù–∏–∂–µ –º–∏–Ω–∏–º—É–º–∞
- ‚úÖ `test_validate_fund_capacity_above_maximum` - –í—ã—à–µ –º–∞–∫—Å–∏–º—É–º–∞
- ‚úÖ `test_assess_investment_risk_low` - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫
- ‚úÖ `test_assess_investment_risk_high` - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
- ‚úÖ `test_validate_compliance_success` - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
- ‚úÖ `test_validate_compliance_suspicious_amount` - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Å—É–º–º–∞
- ‚úÖ `test_validate_compliance_invalid_role` - –ù–µ–≤–µ—Ä–Ω–∞—è —Ä–æ–ª—å
- ‚ùå `test_validate_investment_full_success` - –ü–æ–ª–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

#### ‚ùå Unit —Ç–µ—Å—Ç—ã - API (0/10 –ø—Ä–æ—à–ª–æ)
- ‚ùå `test_create_investment_success` - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- ‚ùå `test_create_investment_validation_failed` - –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚ùå `test_create_investment_unauthorized_role` - –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ä–æ–ª—å
- ‚ùå `test_get_investments_success` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π
- ‚ùå `test_get_investment_by_id_success` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ ID
- ‚ùå `test_get_investment_by_id_not_found` - –ù–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚ùå `test_get_investment_by_id_unauthorized` - –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø
- ‚ùå `test_create_investment_invalid_amount` - –ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞
- ‚ùå `test_create_investment_missing_fields` - –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
- ‚ùå `test_create_investment_database_error` - –û—à–∏–±–∫–∞ –ë–î

## üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –≤ API —Ç–µ—Å—Ç–∞—Ö
**–ü—Ä–æ–±–ª–µ–º–∞**: –í—Å–µ API —Ç–µ—Å—Ç—ã –ø–æ–ª—É—á–∞—é—Ç 403 "Not authenticated" –≤–º–µ—Å—Ç–æ –æ–∂–∏–¥–∞–µ–º—ã—Ö –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–∞.

**–ü—Ä–∏—á–∏–Ω–∞**: 
- –¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `patch` –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è `get_current_user`, –Ω–æ FastAPI dependency injection —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É
- –ù—É–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å dependency override –¥–ª—è —Ç–µ—Å—Ç–æ–≤

**–†–µ—à–µ–Ω–∏–µ**:
```python
# –í —Ç–µ—Å—Ç–∞—Ö –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å app.dependency_overrides
app.dependency_overrides[get_current_user] = lambda: mock_current_user
```

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–æ–∫.

**–ü—Ä–∏–º–µ—Ä—ã**:
- –û–∂–∏–¥–∞–µ—Ç—Å—è: `"inactive" in error_msg`
- –ü–æ–ª—É—á–µ–Ω–æ: `"Investor account is not active"`

**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º –æ–± –æ—à–∏–±–∫–∞—Ö.

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏–∫–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: `test_validate_portfolio_concentration_success` –∏ `test_validate_investment_full_success` –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç.

**–ü—Ä–∏—á–∏–Ω–∞**: –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ —Ä–∞—Å—á–µ—Ç–∞ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏–ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤.

## üõ†Ô∏è –°–æ–∑–¥–∞–Ω–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤
```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py              # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã
‚îú‚îÄ‚îÄ unit/                    # Unit —Ç–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test_investment_validator.py
‚îÇ   ‚îî‚îÄ‚îÄ test_investment_api.py
‚îú‚îÄ‚îÄ integration/             # Integration —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ test_investment_flow.py
‚îî‚îÄ‚îÄ e2e/                     # End-to-end —Ç–µ—Å—Ç—ã (–≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é)
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `pytest.ini` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
- ‚úÖ `run_tests.py` - –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
- ‚úÖ –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `pytest` - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `pytest-asyncio` - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ `pytest-mock` - –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `httpx` - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å API —Ç–µ—Å—Ç—ã
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å dependency override** –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. **–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω–æ–º—É API

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É** –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ
2. **–û–±–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—Å—Ç—ã –æ—à–∏–±–æ–∫** –≤ —Ç–µ—Å—Ç–∞—Ö
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫** –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ
1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã** –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π (auth, fund, portfolio)
2. **–°–æ–∑–¥–∞—Ç—å integration —Ç–µ—Å—Ç—ã** –¥–ª—è –ø–æ–ª–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
3. **–î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- **–¶–µ–ª—å**: 80%+ –ø–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞
- **–¢–µ–∫—É—â–µ–µ**: –ù–µ –∏–∑–º–µ—Ä–µ–Ω–æ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ coverage)

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **Unit —Ç–µ—Å—Ç—ã**: –õ–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
- ‚úÖ **Integration —Ç–µ—Å—Ç—ã**: API endpoints, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üîÑ **E2E —Ç–µ—Å—Ç—ã**: –ü–æ–ª–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫**: `python run_tests.py`
- ‚úÖ **CI/CD –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ pytest-xdist

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–Ω

**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å**: 70% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–µ—Ä—ã**: API —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
**–í—Ä–µ–º—è –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏**: 1-2 –¥–Ω—è

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ)
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Å–∫—Ä–∏–ø—Ç—ã

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
- üîÑ API —Ç–µ—Å—Ç—ã (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
- üîÑ –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- üîÑ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

---

**–î–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞**: 9 —Å–µ–Ω—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è**: 1.0.0
**–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
