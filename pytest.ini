[tool:pytest]
# Disable all warnings and use stable configuration
addopts = -v --tb=short --disable-warnings --no-header --no-summary

# Settings to prevent worker crashes in Docker and local environments
maxfail = 1
timeout = 300
timeout_method = thread

# xdist settings for stable parallel execution
# Disable parallel execution in Docker by default to prevent worker crashes
# Use fewer workers to prevent crashes
xdist_worker_count = 1

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    plotting: marks tests as plotting tests
    admin: marks tests as admin panel tests
    mcp: marks tests as MCP tests
    scripts: marks tests as script tests
    basic: marks tests as basic CLI flag tests
    flag_combinations: marks tests as flag combination tests
    error: marks tests as error case tests
    performance: marks tests as performance tests
    cli: marks tests as CLI tests
    comprehensive: marks tests as comprehensive tests

# Minimum version
minversion = 6.0

# Filter ALL warnings - comprehensive list
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning
    ignore::FutureWarning
    ignore::ImportWarning
    ignore::ResourceWarning
    ignore::SyntaxWarning
    ignore::UnicodeWarning
    ignore::BytesWarning
    ignore::RuntimeWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::pytest.PytestConfigWarning
    ignore::pytest.PytestCollectionWarning
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::pytest.PytestUnknownMarkWarning
    ignore::pytest.PytestWarning
    ignore::UserWarning:pandas.*
    ignore::UserWarning:matplotlib.*
    ignore::UserWarning:plotly.*
    ignore::UserWarning:numpy.*
    ignore::UserWarning:scipy.*
    ignore::UserWarning:sklearn.*
    ignore::UserWarning:statsmodels.*
    ignore::UserWarning:bokeh.*
    ignore::UserWarning:dask.*
    ignore::UserWarning:asyncio.*
    ignore::UserWarning:multiprocessing.*
    ignore::UserWarning:threading.*
    ignore::UserWarning:concurrent.*
    ignore::UserWarning:urllib3.*
    ignore::UserWarning:requests.*
    ignore::UserWarning:httpx.*
    ignore::UserWarning:fastapi.*
    ignore::UserWarning:uvicorn.*
    ignore::UserWarning:sqlalchemy.*
    ignore::UserWarning:alembic.*
    ignore::UserWarning:psycopg2.*
    ignore::UserWarning:pydantic.*
    ignore::UserWarning:jose.*
    ignore::UserWarning:passlib.*
    ignore::UserWarning:asyncpg.*
    ignore::UserWarning:pyotp.*
    ignore::UserWarning:bcrypt.*
    ignore::UserWarning:qrcode.*
    ignore::UserWarning:pyjwt.*
    ignore::UserWarning:yfinance.*
    ignore::UserWarning:rich.*
    ignore::UserWarning:tqdm.*
    ignore::UserWarning:polygon.*
    ignore::UserWarning:binance.*
    ignore::UserWarning:pyarrow.*
    ignore::UserWarning:mplfinance.*
    ignore::UserWarning:watchdog.*
    ignore::UserWarning:python-dotenv.*
    ignore::UserWarning:argon2.*
    ignore::UserWarning:argon2-cffi.*
    ignore::UserWarning:argon2-cffi-bindings.*
    ignore::UserWarning:arrow.*
    ignore::UserWarning:asttokens.*
    ignore::UserWarning:async-lru.*
    ignore::UserWarning:attrs.*
    ignore::UserWarning:babel.*
    ignore::UserWarning:beautifulsoup4.*
    ignore::UserWarning:bleach.*
    ignore::UserWarning:certifi.*
    ignore::UserWarning:cffi.*
    ignore::UserWarning:charset-normalizer.*
    ignore::UserWarning:colorama.*
    ignore::UserWarning:comm.*
    ignore::UserWarning:contourpy.*
    ignore::UserWarning:cycler.*
    ignore::UserWarning:debugpy.*
    ignore::UserWarning:decorator.*
    ignore::UserWarning:defusedxml.*
    ignore::UserWarning:executing.*
    ignore::UserWarning:fastjsonschema.*
    ignore::UserWarning:filelock.*
    ignore::UserWarning:fonttools.*
    ignore::UserWarning:fqdn.*
    ignore::UserWarning:fsspec.*
    ignore::UserWarning:gitdb.*
    ignore::UserWarning:GitPython.*
    ignore::UserWarning:h11.*
    ignore::UserWarning:httpcore.*
    ignore::UserWarning:httpx.*
    ignore::UserWarning:idna.*
    ignore::UserWarning:ipykernel.*
    ignore::UserWarning:ipython.*
    ignore::UserWarning:ipython_pygments_lexers.*
    ignore::UserWarning:isoduration.*
    ignore::UserWarning:jedi.*
    ignore::UserWarning:Jinja2.*
    ignore::UserWarning:joblib.*
    ignore::UserWarning:json5.*
    ignore::UserWarning:jsonpointer.*
    ignore::UserWarning:jsonschema.*
    ignore::UserWarning:jsonschema-specifications.*
    ignore::UserWarning:kiwisolver.*
    ignore::UserWarning:MarkupSafe.*
    ignore::UserWarning:matplotlib-inline.*
    ignore::UserWarning:mistune.*
    ignore::UserWarning:mpmath.*
    ignore::UserWarning:narwhals.*
    ignore::UserWarning:nbclient.*
    ignore::UserWarning:nbconvert.*
    ignore::UserWarning:nbdime.*
    ignore::UserWarning:nbformat.*
    ignore::UserWarning:nest-asyncio.*
    ignore::UserWarning:networkx.*
    ignore::UserWarning:notebook_shim.*
    ignore::UserWarning:overrides.*
    ignore::UserWarning:packaging.*
    ignore::UserWarning:pandocfilters.*
    ignore::UserWarning:parso.*
    ignore::UserWarning:pexpect.*
    ignore::UserWarning:pillow.*
    ignore::UserWarning:platformdirs.*
    ignore::UserWarning:plotext.*
    ignore::UserWarning:prometheus_client.*
    ignore::UserWarning:prompt_toolkit.*
    ignore::UserWarning:psutil.*
    ignore::UserWarning:ptyprocess.*
    ignore::UserWarning:pure_eval.*
    ignore::UserWarning:pycparser.*
    ignore::UserWarning:Pygments.*
    ignore::UserWarning:pyparsing.*
    ignore::UserWarning:python-dateutil.*
    ignore::UserWarning:python-json-logger.*
    ignore::UserWarning:pytz.*
    ignore::UserWarning:PyYAML.*
    ignore::UserWarning:pyzmq.*
    ignore::UserWarning:referencing.*
    ignore::UserWarning:requests.*
    ignore::UserWarning:rfc3339-validator.*
    ignore::UserWarning:rfc3986-validator.*
    ignore::UserWarning:rpds-py.*
    ignore::UserWarning:seaborn.*
    ignore::UserWarning:Send2Trash.*
    ignore::UserWarning:setuptools.*
    ignore::UserWarning:six.*
    ignore::UserWarning:smmap.*
    ignore::UserWarning:sniffio.*
    ignore::UserWarning:soupsieve.*
    ignore::UserWarning:stack-data.*
    ignore::UserWarning:sympy.*
    ignore::UserWarning:terminado.*
    ignore::UserWarning:threadpoolctl.*
    ignore::UserWarning:tinycss2.*
    ignore::UserWarning:tornado.*
    ignore::UserWarning:traitlets.*
    ignore::UserWarning:types-python-dateutil.*
    ignore::UserWarning:typing_extensions.*
    ignore::UserWarning:tzdata.*
    ignore::UserWarning:uri-template.*
    ignore::UserWarning:urllib3.*
    ignore::UserWarning:wcwidth.*
    ignore::UserWarning:webcolors.*
    ignore::UserWarning:webencodings.*
    ignore::UserWarning:websocket-client.*
    ignore::UserWarning:pytest.*
    ignore::UserWarning:anyio.*
    ignore::UserWarning:hypothesis.*
    ignore::UserWarning:timeout.*
    ignore::UserWarning:xdist.*
    ignore::UserWarning:mock.*
    ignore::UserWarning:asyncio.*
    ignore::UserWarning:multiprocessing.*
    ignore::UserWarning:threading.*
    ignore::UserWarning:concurrent.*
    ignore::UserWarning:datashader.*
    ignore::UserWarning:pandas-stubs.*
    ignore::UserWarning:anyio.*
    ignore::UserWarning:hypothesis.*
    ignore::UserWarning:timeout.*
    ignore::UserWarning:xdist.*
    ignore::UserWarning:mock.*
    ignore::UserWarning:asyncio.*
    ignore::UserWarning:multiprocessing.*
    ignore::UserWarning:threading.*
    ignore::UserWarning:concurrent.*
    ignore::UserWarning:datashader.*
    ignore::UserWarning:pandas-stubs.*

# Logging - minimal to reduce noise
log_cli = false
log_cli_level = ERROR
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S