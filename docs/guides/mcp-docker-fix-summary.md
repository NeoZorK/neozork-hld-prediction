# MCP Server Docker Fix Summary

## –ü—Ä–æ–±–ª–µ–º–∞

MCP —Å–µ—Ä–≤–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–∑-–∑–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–æ–±–ª–µ–º:

1. **–¢–∞–π–º–∞—É—Ç ping –∑–∞–ø—Ä–æ—Å–æ–≤**: MCP —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–ª—Å—è –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ, –Ω–æ ping –∑–∞–ø—Ä–æ—Å—ã —Ç–∞–π–º–∞—É—Ç–∏–ª–∏
2. **–ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º**: –°–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª stdio –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è Docker
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–æ–∫–µ—Ç-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏**: –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å–æ–∫–µ—Ç–æ–≤ –¥–ª—è Docker —Å—Ä–µ–¥—ã

## –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Docker —Ä–µ–∂–∏–º–∞

–í `neozork_mcp_server.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è Docker —Å—Ä–µ–¥—ã:

```python
def start(self):
    """Start the MCP server"""
    # Check if running in Docker
    is_docker = os.environ.get("DOCKER_CONTAINER", "false").lower() == "true"
    
    if is_docker:
        print_to_stderr("üê≥ Running in Docker mode - using socket communication")
        self._start_docker_mode()
    else:
        print_to_stderr("üñ•Ô∏è  Running in host mode - using stdio communication")
        self._start_stdio_mode()
```

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–∫–µ—Ç-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Docker

–î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_start_docker_mode()` –∫–æ—Ç–æ—Ä—ã–π:

- –°–æ–∑–¥–∞–µ—Ç TCP —Å–æ–∫–µ—Ç –Ω–∞ localhost:8080
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ MCP –º–µ—Ç–æ–¥—ã

### 3. –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

#### `scripts/mcp/debug_mcp_docker.py`
- –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ Docker
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤

#### `scripts/mcp/test_mcp_docker_client.py`
- –ö–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ –º–µ—Ç–æ–¥–æ–≤
- –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### `scripts/mcp/test_mcp_integrated.py`
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **Docker —Ä–µ–∂–∏–º**: MCP —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç Docker —Å—Ä–µ–¥—É
2. **–°–æ–∫–µ—Ç-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è**: –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ TCP –ø–æ—Ä—Ç 8080
3. **JSON-RPC 2.0**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
4. **–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ –≤ Docker:

```bash
# –ó–∞–ø—É—Å–∫ —Å Docker —Ä–µ–∂–∏–º–æ–º
docker compose run --rm -e DOCKER_CONTAINER=true neozork-hld

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
docker compose run --rm -e DOCKER_CONTAINER=true --entrypoint="" neozork-hld bash -c "python3 scripts/mcp/test_mcp_integrated.py"
```

### üìä –°—Ç–∞—Ç—É—Å –º–µ—Ç–æ–¥–æ–≤

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ MCP –º–µ—Ç–æ–¥—ã –≤ Docker:

- ‚úÖ `neozork/ping` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚úÖ `neozork/status` - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞  
- ‚úÖ `neozork/health` - –ó–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ `neozork/version` - –í–µ—Ä—Å–∏—è —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ `neozork/capabilities` - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ `neozork/projectInfo` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
- ‚úÖ `neozork/financialData` - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ `neozork/indicators` - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í IDE (Cursor, PyCharm, VS Code)

–î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Docker MCP —Å–µ—Ä–≤–µ—Ä–∞:

```json
{
  "mcpServers": {
    "neozork-docker": {
      "command": "docker",
      "args": [
        "compose",
        "run",
        "--rm",
        "-T",
        "-e",
        "PYTHONPATH=/app",
        "-e",
        "DOCKER_CONTAINER=true",
        "neozork-hld",
        "python3",
        "neozork_mcp_server.py"
      ],
      "env": {
        "DOCKER_HOST": "unix:///var/run/docker.sock"
      }
    }
  }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞
python scripts/mcp/check_mcp_status.py

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
python scripts/mcp/debug_mcp_docker.py

# –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç
python scripts/mcp/test_mcp_integrated.py
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

MCP —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:

- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–µ—Ç–µ–∫—Ü–∏—è Docker —Å—Ä–µ–¥—ã
- ‚úÖ –°–æ–∫–µ—Ç-–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è –Ω–∞ –ø–æ—Ä—Ç—É 8080
- ‚úÖ JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª
- ‚úÖ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å IDE

–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ - MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. 