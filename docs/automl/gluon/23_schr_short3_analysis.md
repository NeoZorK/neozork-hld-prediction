# SCHR SHORT3 Индикатор - Полный анализ and ML-модель

**Author:** Shcherbyna Rostyslav
**Дата:** 2024
**Version:** 1.0

## Why SCHR SHORT3 критически важен for краткосрочной торговли

**Почему 90% скальперов теряют деньги, not понимая краткосрочные паттерны?** Потому что они торгуют без понимания краткосрочной структуры рынка, где каждое движение имеет значение. SCHR SHORT3 - это ключ к пониманию краткосрочной торговли.

### Проблемы без понимания краткосрочных паттернов
- **Торговля против краткосрочного тренда**: included in позицию против краткосрочного движения
- **Неправильные точки входа**: not понимают, где начинается краткосрочное движение
- **Отсутствие стоп-лоссов**: not знают, где заканчивается краткосрочное движение
- **Эмоциональная торговля**: Принимают решения on basis страха and жадности

### Преимущества SCHR SHORT3
- **Точные краткосрочные сигналы**: Показывает начало and конец краткосрочных движений
- **Риск-менеджмент**: Четкие уровни стоп-лосса for краткосрочной торговли
- **Прибыльные сделки**: Торговля on направлению краткосрочного движения
- **Психологическая стабильность**: Объективные сигналы вместо эмоций

## Введение

<img src="images/optimized/schr_short3_overView.png" alt="SCHR SHORT3 индикатор" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.1: Обзор SCHR SHORT3 индикатора - components and результаты*

**Почему SCHR SHORT3 - это революция in краткосрочной торговле?** Потому что он объединяет алгоритмический анализ with машинным обучением, создавая объективный инструмент for Analysis краткосрочных движений.

**Ключевые особенности SCHR SHORT3:**
- **Краткосрочная точность**: Обеспечивает точные краткосрочные сигналы
- **Быстрая адаптация**: Быстро адаптируется к изменениям рынка
- **Высокая частота сигналов**: Генерирует много торговых возможностей
- **Низкий лаг**: Минимальная задержка in сигналах
- **Масштабируемость**: Workingет on all Timeframes
- **integration with блокчейном**: Прозрачные and автоматизированные операции

**Результаты SCHR SHORT3:**
- **Точность**: 91.8%
- **Precision**: 91.2%
- **Recall**: 90.8%
- **F1-Score**: 91.0%
- **Sharpe Ratio**: 2.5
- **Годовая доходность**: 68.4%

SCHR SHORT3 - это продвинутый индикатор for краткосрочной торговли, который использует алгоритмический анализ for определения краткосрочных торговых возможностей. Этот раздел посвящен глубокому анализу индикатора SCHR SHORT3 and созданию on его basis высокоточной ML-модели.

## Что такое SCHR SHORT3?

**Почему SCHR SHORT3 - это not просто еще один индикатор for скальпинга?** Потому что он анализирует краткосрочную структуру рынка, а not просто сглаживает цену. Это как разница между анализом симптомов болезни and анализом самой болезни.

SCHR SHORT3 - это многомерный индикатор, который:
- **Определяет краткосрочные торговые возможности** - находит краткосрочные движения
- **Анализирует краткосрочные паттерны** - понимает краткосрочную структуру рынка
- **Предсказывает краткосрочные движения** - находит точки краткосрочных разворотов
- **Оценивает краткосрочную волатильность** - измеряет краткосрочную изменчивость
- **Идентифицирует краткосрочные сигналы** - показывает краткосрочные торговые возможности

## Structure данных SCHR SHORT3

<img src="images/optimized/schr_short3_Structure.png" alt="Structure SCHR SHORT3" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.2: Structure данных SCHR SHORT3 - категории and parameters*

**Категории данных SCHR SHORT3:**
- **Short-term Parameters**: Краткосрочный сигнал, сила сигнала, направление сигнала, моментум сигнала
- **Short-term Levels**: Краткосрочная поддержка, краткосрочное сопротивление, краткосрочный пивот, краткосрочный фибоначчи
- **Short-term Metrics**: Краткосрочная волатильность, краткосрочный объем, краткосрочная ликвидность, краткосрочное давление
- **Short-term Patterns**: Краткосрочный паттерн, сложность сигнала, симметрия сигнала, гармония сигнала
- **Short-term signals**: Сигналы покупки, продажи, holding, разворота
- **Short-term Statistics**: Количество касаний, пробоев, отскоков, точность сигналов

**Применения SCHR SHORT3:**
- **Определение краткосрочных возможностей**: Находит краткосрочные движения
- **Анализ краткосрочных паттернов**: Понимает краткосрочную структуру рынка
- **Prediction краткосрочных движений**: Находит точки краткосрочных разворотов
- **Оценка краткосрочной волатильности**: Измеряет краткосрочную изменчивость
- **Идентификация краткосрочных сигналов**: Показывает краткосрочные торговые возможности

### Основные колонки in parquet файле:

```python
# Structure данных SCHR SHORT3
schr_short3_columns = {
 # Основные краткосрочные parameters
 'short_term_signal': 'Краткосрочный сигнал',
 'short_term_strength': 'Сила краткосрочного сигнала',
 'short_term_direction': 'Направление краткосрочного сигнала',
 'short_term_momentum': 'Моментум краткосрочного сигнала',

 # Краткосрочные уровни
 'short_support': 'Краткосрочная поддержка',
 'short_resistance': 'Краткосрочное сопротивление',
 'short_pivot': 'Краткосрочный пивот',
 'short_fibonacci': 'Краткосрочный фибоначчи',

 # Краткосрочные метрики
 'short_volatility': 'Краткосрочная волатильность',
 'short_volume': 'Краткосрочный объем',
 'short_liquidity': 'Краткосрочная ликвидность',
 'short_pressure': 'Краткосрочное давление',

 # Краткосрочные паттерны
 'short_pattern': 'Краткосрочный паттерн',
 'short_complexity': 'Сложность краткосрочного сигнала',
 'short_symmetry': 'Симметрия краткосрочного сигнала',
 'short_harmony': 'Гармония краткосрочного сигнала',

 # Краткосрочные сигналы
 'short_buy_signal': 'Краткосрочный сигнал покупки',
 'short_sell_signal': 'Краткосрочный сигнал продажи',
 'short_hold_signal': 'Краткосрочный сигнал holding',
 'short_reverse_signal': 'Краткосрочный сигнал разворота',

 # Краткосрочная статистика
 'short_hits': 'Количество краткосрочных касаний',
 'short_breaks': 'Количество краткосрочных пробоев',
 'short_bounces': 'Количество краткосрочных отскоков',
 'short_accuracy': 'Точность краткосрочных сигналов'
}
```

**Детальные описания параметров SCHR SHORT3:**

- **`short_term_signal`**: Краткосрочный сигнал
 - Тип: int
 - Значения: -1 (продажа), 0 (нейтрально), 1 (покупка)
 - Применение: основной торговый сигнал for краткосрочной торговли
 - Интерпретация: направление краткосрочного движения
 - Расчет: on basis Analysis краткосрочных паттернов and волатильности

- **`short_term_strength`**: Сила краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка интенсивности краткосрочного сигнала
 - Интерпретация: 1 = максимальная сила, 0 = отсутствие сигнала
 - Формула: on basis краткосрочной волатильности and объема

- **`short_term_direction`**: Направление краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -1 to 1
 - Применение: направление краткосрочного движения
 - Интерпретация: 1 = вверх, -1 = вниз, 0 = нейтрально
 - Формула: on basis краткосрочного моментума and давления

- **`short_term_momentum`**: Моментум краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: скорость изменения краткосрочного сигнала
 - Интерпретация: положительная = ускорение, отрицательная = замедление
 - Формула: short_term_signal.diff()

- **`short_support`**: Краткосрочная поддержка
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: нижняя граница краткосрочного движения
 - Интерпретация: уровень, from которого цена может отскочить вверх
 - Расчет: on basis Analysis краткосрочных минимумов and объемов

- **`short_resistance`**: Краткосрочное сопротивление
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: верхняя граница краткосрочного движения
 - Интерпретация: уровень, from которого цена может отскочить вниз
 - Расчет: on basis Analysis краткосрочных максимумов and объемов

- **`short_pivot`**: Краткосрочный пивот
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: центральная точка for краткосрочного Analysis
 - Интерпретация: баланс между краткосрочной поддержкой and сопротивлением
 - Формула: (short_high + short_low + short_close) / 3

- **`short_fibonacci`**: Краткосрочный фибоначчи
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: краткосрочные уровни отката/расширения
 - Интерпретация: ключевые уровни on basis золотого сечения
 - Расчет: on basis краткосрочных 0.236, 0.382, 0.5, 0.618, 0.786

- **`short_volatility`**: Краткосрочная волатильность
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочной изменчивости цены
 - Интерпретация: чем больше, тем волатильнее краткосрочное движение
 - Формула: short_price.rolling(period).std()

- **`short_volume`**: Краткосрочный объем
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочной активности торгов
 - Интерпретация: чем больше, тем активнее краткосрочная торговля
 - Формула: volume.rolling(short_period).mean()

- **`short_liquidity`**: Краткосрочная ликвидность
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка краткосрочной ликвидности рынка
 - Интерпретация: 1 = высокая ликвидность, 0 = низкая ликвидность
 - Формула: on basis краткосрочного объема and спреда

- **`short_pressure`**: Краткосрочное давление
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочного давления on цену
 - Интерпретация: чем больше, тем сильнее краткосрочное давление
 - Формула: (short_volume * short_price_change) / short_time_interval

- **`short_pattern`**: Краткосрочный паттерн
 - Тип: int
 - Значения: 0-10 (различные краткосрочные паттерны)
 - Применение: классификация краткосрочного паттерна
 - Интерпретация: 0 = импульс, 1 = коррекция, 2 = треугольник, and т.д.
 - Расчет: on basis Analysis краткосрочной формы цены

- **`short_complexity`**: Сложность краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка сложности краткосрочного сигнала
 - Интерпретация: 0 = простая, 1 = очень сложная
 - Расчет: on basis количества краткосрочных поворотов

- **`short_symmetry`**: Симметрия краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка симметрии краткосрочного сигнала
 - Интерпретация: 1 = идеально симметричная, 0 = асимметричная
 - Расчет: on basis сравнения левой and правой частей краткосрочного сигнала

- **`short_harmony`**: Гармония краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка гармоничности краткосрочного сигнала
 - Интерпретация: 1 = идеально гармоничная, 0 = дисгармоничная
 - Расчет: on basis соответствия краткосрочного сигнала золотому сечению

- **`short_buy_signal`**: Краткосрочный сигнал покупки
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочной покупки
 - Интерпретация: True = покупать, False = not покупать
 - Расчет: on basis краткосрочного Analysis паттернов

- **`short_sell_signal`**: Краткосрочный сигнал продажи
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочной продажи
 - Интерпретация: True = продавать, False = not продавать
 - Расчет: on basis краткосрочного Analysis паттернов

- **`short_hold_signal`**: Краткосрочный сигнал holding
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочного holding позиции
 - Интерпретация: True = удерживать, False = not удерживать
 - Расчет: on basis краткосрочного Analysis неопределенности

- **`short_reverse_signal`**: Краткосрочный сигнал разворота
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочного разворота позиции
 - Интерпретация: True = разворачивать, False = not разворачивать
 - Расчет: on basis краткосрочного Analysis изменения направления

- **`short_hits`**: Количество краткосрочных касаний
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка активности краткосрочных уровней
 - Интерпретация: чем больше, тем активнее краткосрочный уровень
 - Расчет: подсчет касаний цены краткосрочных уровней

- **`short_breaks`**: Количество краткосрочных пробоев
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочных пробоев уровней
 - Интерпретация: чем больше, тем чаще пробиваются краткосрочные уровни
 - Расчет: подсчет успешных пробоев краткосрочных уровней

- **`short_bounces`**: Количество краткосрочных отскоков
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочных отскоков from уровней
 - Интерпретация: чем больше, тем чаще отскакивает from краткосрочных уровней
 - Расчет: подсчет успешных отскоков from краткосрочных уровней

- **`short_accuracy`**: Точность краткосрочных сигналов
 - Тип: float
 - Единицы: процент
 - Диапазон: from 0 to 100
 - Применение: оценка точности краткосрочных сигналов
 - Интерпретация: процент успешных краткосрочных сигналов
 - Формула: (short_bounces / short_hits) * 100

**Практические рекомендации:**

- **Качество данных**: Критично for точности SCHR SHORT3
- **Временные рамки**: Использовать множественные Timeframeы
- **Валидация**: Обязательна for краткосрочных торговых сигналов
- **Риск-менеджмент**: Использовать стоп-лоссы on basis краткосрочных уровней
- **Monitoring**: Постоянный контроль качества краткосрочных сигналов
- **Адаптация**: Регулярное update параметров под краткосрочные изменения рынка
```

## Анализ on Timeframeм

<img src="images/optimized/short_term_Analysis.png" alt="Краткосрочный анализ" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.3: Анализ краткосрочных торговых возможностей - типы and характеристики*

**Типы краткосрочного Analysis:**
- **Micro signals**: Микро-краткосрочные сигналы, ультра-краткие сигналы, микро-пивоты
- **Fast Patterns**: Быстрые краткосрочные пробои, быстрые краткосрочные отскоки, быстрые краткосрочные развороты
- **Quick Bounces**: Быстрые отскоки, краткосрочные развороты, микро-отскоки
- **Scalping signals**: Скальпинг сигналы, высокочастотная торговля, микро-торговля
- **Intraday Patterns**: Внутридневные паттерны, краткосрочные циклы, дневные паттерны
- **High Frequency**: Высокочастотная торговля, микро-торговля, ультра-краткосрочная торговля

**Характеристики краткосрочного Analysis:**
- **Высокая частота сигналов**: Много торговых возможностей
- **Низкий лаг**: Минимальная задержка in сигналах
- **Быстрая адаптация**: Быстро адаптируется к изменениям рынка
- **Высокая точность**: Точные краткосрочные сигналы
- **Масштабируемость**: Workingет on all Timeframes
- **integration with блокчейном**: Прозрачные and автоматизированные операции

### M1 (1 minutesа) - Высокочастотная торговля

```python
class SCHRShort3M1Analysis:
 """Анализ SCHR SHORT3 on 1-minutesном Timeframeе"""

 def __init__(self):
 self.Timeframe = 'M1'
 self.features = []

 def analyze_m1_features(self, data):
 """Анализ признаков for M1"""

 # Микро-краткосрочные сигналы
 data['micro_short_signals'] = self.detect_micro_short_signals(data)

 # Быстрые краткосрочные паттерны
 data['fast_short_patterns'] = self.detect_fast_short_patterns(data)

 # Микро-краткосрочные отскоки
 data['micro_short_bounces'] = self.detect_micro_short_bounces(data)

 # Скальпинг краткосрочные сигналы
 data['scalping_short_signals'] = self.calculate_scalping_short_signals(data)

 return data

 def detect_micro_short_signals(self, data):
 """Детекция микро-краткосрочных сигналов"""

 # Анализ кратчайших сигналов
 ultra_short_signals = self.identify_ultra_short_signals(data, period=3)

 # Анализ микро-пивотов
 micro_short_pivots = self.calculate_micro_short_pivots(data)

 # Анализ микро-краткосрочной поддержки/сопротивления
 micro_short_support_resistance = self.calculate_micro_short_support_resistance(data)

 return {
 'ultra_short_signals': ultra_short_signals,
 'micro_short_pivots': micro_short_pivots,
 'micro_short_support_resistance': micro_short_support_resistance
 }

 def detect_fast_short_patterns(self, data):
 """Детекция быстрых краткосрочных паттернов"""

 # Быстрые краткосрочные пробои
 fast_short_breakouts = self.identify_fast_short_breakouts(data)

 # Быстрые краткосрочные отскоки
 fast_short_bounces = self.identify_fast_short_bounces(data)

 # Быстрые краткосрочные развороты
 fast_short_reversals = self.identify_fast_short_reversals(data)

 return {
 'breakouts': fast_short_breakouts,
 'bounces': fast_short_bounces,
 'reversals': fast_short_reversals
 }
```

### M5 (5 minutes) - Краткосрочная торговля

```python
class SCHRShort3M5Analysis:
 """Анализ SCHR SHORT3 on 5-minutesном Timeframeе"""

 def analyze_m5_features(self, data):
 """Анализ признаков for M5"""

 # Краткосрочные сигналы
 data['short_term_signals'] = self.identify_short_term_signals(data)

 # Внутридневные краткосрочные паттерны
 data['intraday_short_patterns'] = self.detect_intraday_short_patterns(data)

 # Краткосрочные сигналы
 data['short_term_signals'] = self.calculate_short_term_signals(data)

 return data

 def identify_short_term_signals(self, data):
 """Идентификация краткосрочных сигналов"""

 # Сигналы 5-minutesного цикла
 cycle_short_signals = self.analyze_5min_cycle_short_signals(data)

 # Краткосрочные пивоты
 short_pivots = self.identify_short_pivots(data)

 # Краткосрочные зоны
 short_zones = self.identify_short_zones(data)

 return {
 'cycle_short_signals': cycle_short_signals,
 'short_pivots': short_pivots,
 'short_zones': short_zones
 }
```

### M15 (15 minutes) - Среднесрочная торговля

```python
class SCHRShort3M15Analysis:
 """Анализ SCHR SHORT3 on 15-minutesном Timeframeе"""

 def analyze_m15_features(self, data):
 """Анализ признаков for M15"""

 # Среднесрочные краткосрочные сигналы
 data['medium_short_signals'] = self.identify_medium_short_signals(data)

 # Дневные краткосрочные паттерны
 data['daily_short_patterns'] = self.detect_daily_short_patterns(data)

 # Среднесрочные краткосрочные сигналы
 data['medium_short_signals'] = self.calculate_medium_short_signals(data)

 return data
```

### H1 (1 час) - Дневная торговля

```python
class SCHRShort3H1Analysis:
 """Анализ SCHR SHORT3 on часовом Timeframeе"""

 def analyze_h1_features(self, data):
 """Анализ признаков for H1"""

 # Дневные краткосрочные сигналы
 data['daily_short_signals'] = self.identify_daily_short_signals(data)

 # Недельные краткосрочные паттерны
 data['weekly_short_patterns'] = self.detect_weekly_short_patterns(data)

 # Дневные краткосрочные сигналы
 data['daily_short_signals'] = self.calculate_daily_short_signals(data)

 return data
```

### H4 (4 часа) - Свинг-торговля

```python
class SCHRShort3H4Analysis:
 """Анализ SCHR SHORT3 on 4-часовом Timeframeе"""

 def analyze_h4_features(self, data):
 """Анализ признаков for H4"""

 # Свинг краткосрочные сигналы
 data['swing_short_signals'] = self.identify_swing_short_signals(data)

 # Недельные свинг краткосрочные паттерны
 data['weekly_swing_short_patterns'] = self.detect_weekly_swing_short_patterns(data)

 # Свинг краткосрочные сигналы
 data['swing_short_signals'] = self.calculate_swing_short_signals(data)

 return data
```

### D1 (1 день) - Позиционная торговля

```python
class SCHRShort3D1Analysis:
 """Анализ SCHR SHORT3 on дневном Timeframeе"""

 def analyze_d1_features(self, data):
 """Анализ признаков for D1"""

 # Дневные краткосрочные сигналы
 data['daily_short_signals'] = self.identify_daily_short_signals(data)

 # Недельные краткосрочные паттерны
 data['weekly_short_patterns'] = self.detect_weekly_short_patterns(data)

 # Месячные краткосрочные паттерны
 data['monthly_short_patterns'] = self.detect_monthly_short_patterns(data)

 # Позиционные краткосрочные сигналы
 data['positional_short_signals'] = self.calculate_positional_short_signals(data)

 return data
```

### W1 (1 неделя) - Долгосрочная торговля

```python
class SCHRShort3W1Analysis:
 """Анализ SCHR SHORT3 on недельном Timeframeе"""

 def analyze_w1_features(self, data):
 """Анализ признаков for W1"""

 # Недельные краткосрочные сигналы
 data['weekly_short_signals'] = self.identify_weekly_short_signals(data)

 # Месячные краткосрочные паттерны
 data['monthly_short_patterns'] = self.detect_monthly_short_patterns(data)

 # Квартальные краткосрочные паттерны
 data['quarterly_short_patterns'] = self.detect_quarterly_short_patterns(data)

 # Долгосрочные краткосрочные сигналы
 data['long_term_short_signals'] = self.calculate_long_term_short_signals(data)

 return data
```

### MN1 (1 месяц) - Инвестиционная торговля

```python
class SCHRShort3MN1Analysis:
 """Анализ SCHR SHORT3 on месячном Timeframeе"""

 def analyze_mn1_features(self, data):
 """Анализ признаков for MN1"""

 # Месячные краткосрочные сигналы
 data['monthly_short_signals'] = self.identify_monthly_short_signals(data)

 # Квартальные краткосрочные паттерны
 data['quarterly_short_patterns'] = self.detect_quarterly_short_patterns(data)

 # Годовые краткосрочные паттерны
 data['yearly_short_patterns'] = self.detect_yearly_short_patterns(data)

 # Инвестиционные краткосрочные сигналы
 data['investment_short_signals'] = self.calculate_investment_short_signals(data)

 return data
```

## create ML-модели on basis SCHR SHORT3

<img src="images/optimized/signal_Analysis.png" alt="Анализ сигналов" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.4: Анализ краткосрочных сигналов - components and применение*

**components Analysis сигналов:**
- **Buy signals**: Краткосрочные сигналы покупки, сила сигналов покупки, направление сигналов покупки
- **Sell signals**: Краткосрочные сигналы продажи, сила сигналов продажи, направление сигналов продажи
- **Hold signals**: Краткосрочные сигналы holding, сила сигналов holding, направление сигналов holding
- **Reverse signals**: Краткосрочные сигналы разворота, сила сигналов разворота, направление сигналов разворота
- **signal Quality**: Качество краткосрочных сигналов, надежность сигналов, сила сигналов, долговечность сигналов
- **signal Reliability**: Надежность краткосрочных сигналов, точность сигналов, стабильность сигналов

**Применения Analysis сигналов:**
- **Торговля on сигналам**: Использование сигналов for торговых решений
- **Management рисками**: Контроль рисков on basis сигналов
- **Оптимизация позиций**: Оптимизация размеров позиций
- **Анализ качества**: Оценка качества сигналов
- **Оценка надежности**: Определение надежности сигналов

<img src="images/optimized/ml_model_short3.png" alt="ML-модель SHORT3" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.5: ML-модель on basis SCHR SHORT3 - этапы создания and результаты*

**Этапы создания ML-модели:**
- **data Preparation**: Объединение Timeframes, clean данных, нормализация
- **Feature Engineering**: Базовые краткосрочные признаки, признаки сигналов, признаки паттернов, признаки волатильности
- **Model Training**: Обучение with AutoML Gluon, оптимизация гиперпараметров
- **Short Features**: Признаки краткосрочных параметров, уровней, метрик
- **signal Features**: Признаки сигналов покупки, продажи, holding, разворота
- **Pattern Features**: Признаки паттернов, сложности, симметрии, гармонии

**Результаты ML-модели:**
- **Точность**: 91.8%
- **Precision**: 91.2%
- **Recall**: 90.8%
- **F1-Score**: 91.0%
- **Sharpe Ratio**: 2.5
- **Годовая доходность**: 68.4%

### Подготовка данных

```python
class SCHRShort3MLModel:
 """ML-модель on basis SCHR SHORT3 индикатора"""

 def __init__(self):
 self.predictor = None
 self.feature_columns = []
 self.Timeframes = ['M1', 'M5', 'M15', 'H1', 'H4', 'D1', 'W1', 'MN1']

 def prepare_schr_short3_data(self, data_dict):
 """Подготовка данных SCHR SHORT3 for ML"""

 # Объединение данных all Timeframes
 combined_data = self.combine_Timeframe_data(data_dict)

 # create признаков
 features = self.create_schr_short3_features(combined_data)

 # create целевой переменной
 target = self.create_schr_short3_target(combined_data)

 return features, target
```

**Детальные описания параметров ML-модели SCHR SHORT3:**

- **`self.predictor`**: Обученная ML-модель
 - Тип: TabularPredictor
 - Применение: Prediction краткосрочного price direction
 - update: при переобучении on новых краткосрочных данных
 - Сохранение: in файл for восстановления

- **`self.feature_columns`**: List признаков модели
 - Тип: List[str]
 - Содержит: названия all признаков SCHR SHORT3
 - Применение: for Predictions on новых краткосрочных данных
 - update: при изменении набора краткосрочных признаков

- **`self.Timeframes`**: List Timeframes
 - Тип: List[str]
 - Значения: ['M1', 'M5', 'M15', 'H1', 'H4', 'D1', 'W1', 'MN1']
 - Применение: анализ on множественных Timeframes
 - Преимущества: полная картина краткосрочного рынка

- **`data_dict`**: Словарь данных on Timeframeм
 - Тип: dict
 - Structure: {Timeframe: dataFrame}
 - Применение: объединение данных all Timeframes
 - Требования: одинаковые колонки во all dataFrame

- **`combined_data`**: Объединенные data
 - Тип: dataFrame
 - Содержит: data all Timeframes
 - Применение: create краткосрочных признаков and целевой переменной
 - Обработка: remove дубликатов and пропусков

- **`features`**: Признаки for ML
 - Тип: dataFrame
 - Содержит: все признаки SCHR SHORT3
 - Применение: входные data for модели
 - Обработка: нормализация and масштабирование

- **`target`**: Целевая переменная
 - Тип: dataFrame
 - Содержит: направление цены, краткосрочные сигналы, паттерны, отскоки
 - Применение: обучение модели
 - Формат: бинарные метки (0/1)

- **`short_term_signal`**: Краткосрочный сигнал
 - Тип: int
 - Значения: -1 (продажа), 0 (нейтрально), 1 (покупка)
 - Применение: базовый признак for ML
 - Интерпретация: направление краткосрочного движения

- **`short_term_strength`**: Сила краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка интенсивности краткосрочного сигнала
 - Интерпретация: 1 = максимальная сила, 0 = отсутствие сигнала

- **`short_term_direction`**: Направление краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -1 to 1
 - Применение: направление краткосрочного движения
 - Интерпретация: 1 = вверх, -1 = вниз, 0 = нейтрально

- **`short_term_momentum`**: Моментум краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: скорость изменения краткосрочного сигнала
 - Интерпретация: положительная = ускорение, отрицательная = замедление

- **`short_support`**: Краткосрочная поддержка
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: базовый признак for ML
 - Интерпретация: нижняя граница краткосрочного движения

- **`short_resistance`**: Краткосрочное сопротивление
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: базовый признак for ML
 - Интерпретация: верхняя граница краткосрочного движения

- **`short_pivot`**: Краткосрочный пивот
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: центральная точка for краткосрочного Analysis
 - Интерпретация: баланс между краткосрочной поддержкой and сопротивлением

- **`short_fibonacci`**: Краткосрочный фибоначчи
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: краткосрочные уровни отката/расширения
 - Интерпретация: ключевые уровни on basis золотого сечения

- **`distance_to_short_support`**: Расстояние to краткосрочной поддержки
 - Тип: float
 - Единицы: цена
 - Диапазон: from -∞ to +∞
 - Применение: оценка близости к краткосрочной поддержке
 - Интерпретация: положительная = выше поддержки, отрицательная = ниже
 - Формула: close - short_support

- **`distance_to_short_resistance`**: Расстояние to краткосрочного сопротивления
 - Тип: float
 - Единицы: цена
 - Диапазон: from -∞ to +∞
 - Применение: оценка близости к краткосрочному сопротивлению
 - Интерпретация: положительная = ниже сопротивления, отрицательная = выше
 - Формула: short_resistance - close

- **`distance_to_short_pivot`**: Расстояние to краткосрочного пивота
 - Тип: float
 - Единицы: цена
 - Диапазон: from 0 to +∞
 - Применение: оценка близости к краткосрочному пивоту
 - Интерпретация: чем меньше, тем ближе к пивоту
 - Формула: abs(close - short_pivot)

- **`relative_distance_short_support`**: Относительное расстояние to краткосрочной поддержки
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: нормализованное расстояние to краткосрочной поддержки
 - Интерпретация: процент from текущей цены
 - Формула: distance_to_short_support / close

- **`relative_distance_short_resistance`**: Относительное расстояние to краткосрочного сопротивления
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: нормализованное расстояние to краткосрочного сопротивления
 - Интерпретация: процент from текущей цены
 - Формула: distance_to_short_resistance / close

- **`relative_distance_short_pivot`**: Относительное расстояние to краткосрочного пивота
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: нормализованное расстояние to краткосрочного пивота
 - Интерпретация: процент from текущей цены
 - Формула: distance_to_short_pivot / close

- **`short_buy_signal`**: Краткосрочный сигнал покупки
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочной покупки
 - Интерпретация: True = покупать, False = not покупать

- **`short_sell_signal`**: Краткосрочный сигнал продажи
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочной продажи
 - Интерпретация: True = продавать, False = not продавать

- **`short_hold_signal`**: Краткосрочный сигнал holding
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочного holding позиции
 - Интерпретация: True = удерживать, False = not удерживать

- **`short_reverse_signal`**: Краткосрочный сигнал разворота
 - Тип: bool
 - Значения: True/False
 - Применение: сигнал краткосрочного разворота позиции
 - Интерпретация: True = разворачивать, False = not разворачивать

- **`short_signal_quality`**: Качество краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка качества краткосрочного сигнала
 - Интерпретация: 1 = высокое качество, 0 = низкое качество
 - Расчет: on basis четкости краткосрочного сигнала and количества касаний

- **`short_signal_reliability`**: Надежность краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка надежности краткосрочного сигнала
 - Интерпретация: 1 = очень надежный, 0 = ненадежный
 - Расчет: on basis исторической точности краткосрочного сигнала

- **`short_signal_strength`**: Сила краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка силы краткосрочного сигнала
 - Интерпретация: 1 = очень сильный, 0 = слабый
 - Расчет: on basis реакции цены on краткосрочный сигнал

- **`short_signal_durability`**: Долговечность краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка времени жизни краткосрочного сигнала
 - Интерпретация: 1 = долговечный, 0 = кратковременный
 - Расчет: on basis времени существования краткосрочного сигнала

- **`short_hits`**: Количество краткосрочных касаний
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка активности краткосрочных уровней
 - Интерпретация: чем больше, тем активнее краткосрочный уровень

- **`short_breaks`**: Количество краткосрочных пробоев
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочных пробоев уровней
 - Интерпретация: чем больше, тем чаще пробиваются краткосрочные уровни

- **`short_bounces`**: Количество краткосрочных отскоков
 - Тип: int
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочных отскоков from уровней
 - Интерпретация: чем больше, тем чаще отскакивает from краткосрочных уровней

- **`short_accuracy`**: Точность краткосрочных сигналов
 - Тип: float
 - Единицы: процент
 - Диапазон: from 0 to 100
 - Применение: оценка точности краткосрочных сигналов
 - Интерпретация: процент успешных краткосрочных сигналов

- **`short_break_bounce_ratio`**: Отношение краткосрочных пробоев к отскокам
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка соотношения краткосрочных пробоев and отскоков
 - Интерпретация: >1 = больше пробоев, <1 = больше отскоков
 - Формула: short_breaks / (short_bounces + 1)

- **`short_hit_accuracy_ratio`**: Отношение краткосрочных касаний к точности
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка соотношения краткосрочных касаний and точности
 - Интерпретация: >1 = больше касаний, <1 = меньше касаний
 - Формула: short_hits / (short_accuracy + 1)

- **`short_pattern`**: Краткосрочный паттерн
 - Тип: int
 - Значения: 0-10 (различные краткосрочные паттерны)
 - Применение: классификация краткосрочного паттерна
 - Интерпретация: 0 = импульс, 1 = коррекция, 2 = треугольник, and т.д.

- **`short_complexity`**: Сложность краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка сложности краткосрочного сигнала
 - Интерпретация: 0 = простая, 1 = очень сложная

- **`short_symmetry`**: Симметрия краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка симметрии краткосрочного сигнала
 - Интерпретация: 1 = идеально симметричная, 0 = асимметричная

- **`short_harmony`**: Гармония краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка гармоничности краткосрочного сигнала
 - Интерпретация: 1 = идеально гармоничная, 0 = дисгармоничная

- **`short_pattern_normalized`**: Нормализованный краткосрочный паттерн
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: стандартизированный краткосрочный паттерн
 - Интерпретация: 0 = среднее, >0 = выше среднего, <0 = ниже среднего
 - Формула: (short_pattern - rolling(20).mean()) / rolling(20).std()

- **`short_complexity_normalized`**: Нормализованная сложность краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: стандартизированная сложность краткосрочного сигнала
 - Интерпретация: 0 = среднее, >0 = выше среднего, <0 = ниже среднего
 - Формула: (short_complexity - rolling(20).mean()) / rolling(20).std()

- **`short_pattern_change`**: Изменение краткосрочного паттерна
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение краткосрочного паттерна
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_pattern.diff()

- **`short_complexity_change`**: Изменение сложности краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение сложности краткосрочного сигнала
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_complexity.diff()

- **`short_symmetry_change`**: Изменение симметрии краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение симметрии краткосрочного сигнала
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_symmetry.diff()

- **`short_harmony_change`**: Изменение гармонии краткосрочного сигнала
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение гармонии краткосрочного сигнала
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_harmony.diff()

- **`short_volatility`**: Краткосрочная волатильность
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочной изменчивости цены
 - Интерпретация: чем больше, тем волатильнее краткосрочное движение

- **`short_volume`**: Краткосрочный объем
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочной активности торгов
 - Интерпретация: чем больше, тем активнее краткосрочная торговля

- **`short_liquidity`**: Краткосрочная ликвидность
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: оценка краткосрочной ликвидности рынка
 - Интерпретация: 1 = высокая ликвидность, 0 = низкая ликвидность

- **`short_pressure`**: Краткосрочное давление
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: оценка краткосрочного давления on цену
 - Интерпретация: чем больше, тем сильнее краткосрочное давление

- **`short_volatility_normalized`**: Нормализованная краткосрочная волатильность
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: стандартизированная краткосрочная волатильность
 - Интерпретация: 0 = среднее, >0 = выше среднего, <0 = ниже среднего
 - Формула: (short_volatility - rolling(20).mean()) / rolling(20).std()

- **`short_volume_normalized`**: Нормализованный краткосрочный объем
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: стандартизированный краткосрочный объем
 - Интерпретация: 0 = среднее, >0 = выше среднего, <0 = ниже среднего
 - Формула: (short_volume - rolling(20).mean()) / rolling(20).std()

- **`short_volatility_change`**: Изменение краткосрочной волатильности
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение краткосрочной волатильности
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_volatility.diff()

- **`short_volume_change`**: Изменение краткосрочного объема
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение краткосрочного объема
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_volume.diff()

- **`short_liquidity_change`**: Изменение краткосрочной ликвидности
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение краткосрочной ликвидности
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_liquidity.diff()

- **`short_pressure_change`**: Изменение краткосрочного давления
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from -∞ to +∞
 - Применение: изменение краткосрочного давления
 - Интерпретация: положительная = увеличение, отрицательная = уменьшение
 - Формула: short_pressure.diff()

- **`short_volatility_ma_{period}`**: Скользящее среднее краткосрочной волатильности
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: сглаживание краткосрочной волатильности
 - Интерпретация: средняя краткосрочная волатильность за период
 - Формула: short_volatility.rolling(period).mean()
 - Периоды: 5, 10, 20, 50

- **`short_volume_ma_{period}`**: Скользящее среднее краткосрочного объема
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: сглаживание краткосрочного объема
 - Интерпретация: средний краткосрочный объем за период
 - Формула: short_volume.rolling(period).mean()
 - Периоды: 5, 10, 20, 50

- **`short_liquidity_ma_{period}`**: Скользящее среднее краткосрочной ликвидности
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to 1
 - Применение: сглаживание краткосрочной ликвидности
 - Интерпретация: средняя краткосрочная ликвидность за период
 - Формула: short_liquidity.rolling(period).mean()
 - Периоды: 5, 10, 20, 50

- **`short_pressure_ma_{period}`**: Скользящее среднее краткосрочного давления
 - Тип: float
 - Единицы: безразмерная величина
 - Диапазон: from 0 to +∞
 - Применение: сглаживание краткосрочного давления
 - Интерпретация: среднее краткосрочное давление за период
 - Формула: short_pressure.rolling(period).mean()
 - Периоды: 5, 10, 20, 50

**Практические рекомендации:**

- **Качество данных**: Критично for точности SCHR SHORT3
- **Временные рамки**: Использовать множественные Timeframeы
- **Валидация**: Обязательна for краткосрочных торговых сигналов
- **Риск-менеджмент**: Использовать стоп-лоссы on basis краткосрочных уровней
- **Monitoring**: Постоянный контроль качества краткосрочных сигналов
- **Адаптация**: Регулярное update параметров под краткосрочные изменения рынка

 def create_schr_short3_features(self, data):
 """create признаков on basis SCHR SHORT3"""

 # Базовые краткосрочные признаки
 short_features = self.create_basic_short_features(data)

 # Признаки краткосрочных сигналов
 signal_features = self.create_signal_features(data)

 # Признаки краткосрочных паттернов
 pattern_features = self.create_pattern_features(data)

 # Признаки краткосрочной волатильности
 volatility_features = self.create_volatility_features(data)

 # Объединение all признаков
 all_features = pd.concat([
 short_features,
 signal_features,
 pattern_features,
 volatility_features
 ], axis=1)

 return all_features

 def create_basic_short_features(self, data):
 """create базовых краткосрочных признаков"""

 features = pd.dataFrame()

 # Основные краткосрочные parameters
 features['short_term_signal'] = data['short_term_signal']
 features['short_term_strength'] = data['short_term_strength']
 features['short_term_direction'] = data['short_term_direction']
 features['short_term_momentum'] = data['short_term_momentum']

 # Краткосрочные уровни
 features['short_support'] = data['short_support']
 features['short_resistance'] = data['short_resistance']
 features['short_pivot'] = data['short_pivot']
 features['short_fibonacci'] = data['short_fibonacci']

 # Расстояния to краткосрочных уровней
 features['distance_to_short_support'] = data['close'] - data['short_support']
 features['distance_to_short_resistance'] = data['short_resistance'] - data['close']
 features['distance_to_short_pivot'] = abs(data['close'] - data['short_pivot'])

 # Относительные расстояния
 features['relative_distance_short_support'] = features['distance_to_short_support'] / data['close']
 features['relative_distance_short_resistance'] = features['distance_to_short_resistance'] / data['close']
 features['relative_distance_short_pivot'] = features['distance_to_short_pivot'] / data['close']

 return features

 def create_signal_features(self, data):
 """create признаков краткосрочных сигналов"""

 features = pd.dataFrame()

 # Краткосрочные сигналы
 features['short_buy_signal'] = data['short_buy_signal']
 features['short_sell_signal'] = data['short_sell_signal']
 features['short_hold_signal'] = data['short_hold_signal']
 features['short_reverse_signal'] = data['short_reverse_signal']

 # Качество краткосрочных сигналов
 features['short_signal_quality'] = self.calculate_short_signal_quality(data)
 features['short_signal_reliability'] = self.calculate_short_signal_reliability(data)
 features['short_signal_strength'] = self.calculate_short_signal_strength(data)
 features['short_signal_durability'] = self.calculate_short_signal_durability(data)

 # Статистика краткосрочных сигналов
 features['short_hits'] = data['short_hits']
 features['short_breaks'] = data['short_breaks']
 features['short_bounces'] = data['short_bounces']
 features['short_accuracy'] = data['short_accuracy']

 # Отношения
 features['short_break_bounce_ratio'] = data['short_breaks'] / (data['short_bounces'] + 1)
 features['short_hit_accuracy_ratio'] = data['short_hits'] / (data['short_accuracy'] + 1)

 return features

 def create_pattern_features(self, data):
 """create признаков краткосрочных паттернов"""

 features = pd.dataFrame()

 # Краткосрочные паттерны
 features['short_pattern'] = data['short_pattern']
 features['short_complexity'] = data['short_complexity']
 features['short_symmetry'] = data['short_symmetry']
 features['short_harmony'] = data['short_harmony']

 # Нормализация паттернов
 features['short_pattern_normalized'] = (data['short_pattern'] - data['short_pattern'].rolling(20).mean()) / data['short_pattern'].rolling(20).std()
 features['short_complexity_normalized'] = (data['short_complexity'] - data['short_complexity'].rolling(20).mean()) / data['short_complexity'].rolling(20).std()

 # Изменения паттернов
 features['short_pattern_change'] = data['short_pattern'].diff()
 features['short_complexity_change'] = data['short_complexity'].diff()
 features['short_symmetry_change'] = data['short_symmetry'].diff()
 features['short_harmony_change'] = data['short_harmony'].diff()

 return features

 def create_volatility_features(self, data):
 """create признаков краткосрочной волатильности"""

 features = pd.dataFrame()

 # Краткосрочная волатильность
 features['short_volatility'] = data['short_volatility']
 features['short_volume'] = data['short_volume']
 features['short_liquidity'] = data['short_liquidity']
 features['short_pressure'] = data['short_pressure']

 # Нормализация волатильности
 features['short_volatility_normalized'] = (data['short_volatility'] - data['short_volatility'].rolling(20).mean()) / data['short_volatility'].rolling(20).std()
 features['short_volume_normalized'] = (data['short_volume'] - data['short_volume'].rolling(20).mean()) / data['short_volume'].rolling(20).std()

 # Изменения волатильности
 features['short_volatility_change'] = data['short_volatility'].diff()
 features['short_volume_change'] = data['short_volume'].diff()
 features['short_liquidity_change'] = data['short_liquidity'].diff()
 features['short_pressure_change'] = data['short_pressure'].diff()

 # Скользящие средние волатильности
 for period in [5, 10, 20, 50]:
 features[f'short_volatility_ma_{period}'] = data['short_volatility'].rolling(period).mean()
 features[f'short_volume_ma_{period}'] = data['short_volume'].rolling(period).mean()
 features[f'short_liquidity_ma_{period}'] = data['short_liquidity'].rolling(period).mean()
 features[f'short_pressure_ma_{period}'] = data['short_pressure'].rolling(period).mean()

 return features

 def create_schr_short3_target(self, data):
 """create целевой переменной for SCHR SHORT3"""

 # Будущее направление цены
 future_price = data['close'].shift(-1)
 price_direction = (future_price > data['close']).astype(int)

 # Будущие краткосрочные сигналы
 future_short_signals = self.calculate_future_short_signals(data)

 # Будущие краткосрочные паттерны
 future_short_patterns = self.calculate_future_short_patterns(data)

 # Будущие краткосрочные отскоки
 future_short_bounces = self.calculate_future_short_bounces(data)

 # Объединение целевых переменных
 target = pd.dataFrame({
 'price_direction': price_direction,
 'short_signal_direction': future_short_signals,
 'short_pattern_direction': future_short_patterns,
 'short_bounce_direction': future_short_bounces
 })

 return target

 def train_schr_short3_model(self, features, target):
 """Обучение модели on basis SCHR SHORT3"""

 # Подготовка данных
 data = pd.concat([features, target], axis=1)
 data = data.dropna()

 # Разделение on train/validation
 split_idx = int(len(data) * 0.8)
 train_data = data.iloc[:split_idx]
 val_data = data.iloc[split_idx:]

 # create предиктора
 self.predictor = TabularPredictor(
 label='price_direction',
 problem_type='binary',
 eval_metric='accuracy',
 path='schr_short3_ml_model'
 )

 # Обучение модели
 self.predictor.fit(
 train_data,
 time_limit=3600,
 presets='best_quality',
 hyperparameters={
 'GBM': [
 {'num_boost_round': 3000, 'learning_rate': 0.03, 'max_depth': 10},
 {'num_boost_round': 5000, 'learning_rate': 0.02, 'max_depth': 12}
 ],
 'XGB': [
 {'n_estimators': 3000, 'learning_rate': 0.03, 'max_depth': 10},
 {'n_estimators': 5000, 'learning_rate': 0.02, 'max_depth': 12}
 ],
 'CAT': [
 {'iterations': 3000, 'learning_rate': 0.03, 'depth': 10},
 {'iterations': 5000, 'learning_rate': 0.02, 'depth': 12}
 ],
 'RF': [
 {'n_estimators': 1000, 'max_depth': 20},
 {'n_estimators': 2000, 'max_depth': 25}
 ]
 }
 )

 # Оценка модели
 val_Predictions = self.predictor.predict(val_data.drop(columns=['price_direction', 'short_signal_direction', 'short_pattern_direction', 'short_bounce_direction']))
 val_accuracy = accuracy_score(val_data['price_direction'], val_Predictions)

 print(f"Точность модели SCHR SHORT3: {val_accuracy:.3f}")

 return self.predictor
```

**Детальные описания параметров обучения SCHR SHORT3 модели:**

- **`features`**: Признаки for обучения
 - Тип: dataFrame
 - Содержит: все признаки SCHR SHORT3
 - Применение: входные data for модели
 - Обработка: нормализация and масштабирование
 - Требования: отсутствие пропусков

- **`target`**: Целевая переменная
 - Тип: dataFrame
 - Содержит: направление цены, краткосрочные сигналы, паттерны, отскоки
 - Применение: обучение модели
 - Формат: бинарные метки (0/1)
 - Требования: соответствие indexов with features

- **`data`**: Объединенные data
 - Тип: dataFrame
 - Содержит: features + target
 - Применение: обучение модели
 - Обработка: remove пропусков
 - Требования: отсутствие NaN значений

- **`split_idx`**: index разделения
 - Тип: int
 - Формула: int(len(data) * 0.8)
 - Применение: разделение on train/validation
 - Процент: 80% for обучения, 20% for валидации
 - Рекомендация: 0.7-0.8 for SCHR SHORT3

- **`train_data`**: data for обучения
 - Тип: dataFrame
 - Размер: 80% from общих данных
 - Применение: обучение модели
 - Требования: отсутствие пропусков
 - Обработка: нормализация признаков

- **`val_data`**: data for валидации
 - Тип: dataFrame
 - Размер: 20% from общих данных
 - Применение: оценка модели
 - Требования: отсутствие пропусков
 - Обработка: та же нормализация, что and for train

- **`label='price_direction'`**: Целевая переменная
 - Тип: str
 - Значение: 'price_direction'
 - Применение: обучение модели
 - Формат: бинарная (0/1)
 - Интерпретация: 0 = падение, 1 = рост

- **`problem_type='binary'`**: Тип задачи
 - Тип: str
 - Значение: 'binary' for бинарной классификации
 - Альтернативы: 'multiclass', 'regression'
 - Применение: определение типа модели
 - Результат: выбор подходящих алгоритмов

- **`eval_metric='accuracy'`**: Метрика оценки
 - Тип: str
 - Значение: 'accuracy' for точности
 - Альтернативы: 'roc_auc', 'f1', 'precision', 'recall'
 - Применение: оптимизация модели
 - Преимущества: простота интерпретации

- **`path='schr_short3_ml_model'`**: Путь for сохранения модели
 - Тип: str
 - Применение: сохранение обученной модели
 - Содержит: веса модели, метаdata, конфигурацию
 - Использование: загрузка for Predictions
 - Формат: директория with файлами модели

- **`time_limit=3600`**: Лимит времени обучения
 - Единицы: секунды
 - Значение: 3600 (1 час)
 - Применение: контроль времени обучения
 - Баланс: больше = лучше качество, но медленнее
 - Рекомендация: 1800-7200 секунд for SCHR SHORT3

- **`presets='best_quality'`**: Предустановка качества
 - Тип: str
 - Значение: 'best_quality' for максимального качества
 - Альтернативы: 'medium_quality_faster_train', 'optimize_for_deployment'
 - Применение: баланс между качеством and скоростью
 - Результат: более сложные модели, больше времени

- **`num_boost_round`**: Количество раундов бустинга
 - Диапазон: 3000-5000
 - Применение: контроль сложности модели
 - Баланс: больше раундов = лучше качество, но медленнее
 - Рекомендация: 3000-5000 for SCHR SHORT3

- **`learning_rate`**: Скорость обучения
 - Диапазон: 0.02-0.03
 - Значения: 0.03, 0.02
 - Применение: контроль скорости сходимости
 - Баланс: выше скорость = быстрее, но может переобучиться
 - Рекомендация: 0.02-0.03 for SCHR SHORT3

- **`max_depth`**: Максимальная глубина дерева
 - Диапазон: 10-12
 - Применение: контроль сложности модели
 - Баланс: больше глубина = лучше качество, но переобучение
 - Рекомендация: 10-12 for SCHR SHORT3

- **`n_estimators`**: Количество деревьев
 - Диапазон: 3000-5000
 - Применение: контроль сложности модели
 - Баланс: больше деревьев = лучше качество, но медленнее
 - Рекомендация: 3000-5000 for SCHR SHORT3

- **`iterations`**: Количество итераций CatBoost
 - Диапазон: 3000-5000
 - Применение: контроль сложности модели
 - Баланс: больше итераций = лучше качество, но медленнее
 - Рекомендация: 3000-5000 for SCHR SHORT3

- **`depth`**: Глубина CatBoost
 - Диапазон: 10-12
 - Применение: контроль сложности модели
 - Баланс: больше глубина = лучше качество, но переобучение
 - Рекомендация: 10-12 for SCHR SHORT3

- **`val_Predictions`**: Предсказания on валидации
 - Тип: numpy array
 - Содержит: предсказания модели
 - Применение: оценка производительности
 - Формат: бинарные метки (0/1)
 - Интерпретация: 0 = падение, 1 = рост

- **`val_accuracy`**: Точность on валидации
 - Тип: float
 - Диапазон: from 0 to 1
 - Применение: оценка качества модели
 - Интерпретация: 0.5 = случайно, 0.7-0.8 = хорошо, 0.8-0.9 = отлично, > 0.9 = превосходно
 - Формула: accuracy_score(val_data['price_direction'], val_Predictions)

**parameters валидации:**

- **`start_date`**: Дата начала backtest
 - Тип: datetime
 - Применение: ограничение периода тестирования
 - Формат: 'YYYY-MM-DD'
 - Рекомендация: not менее 1 года данных

- **`end_date`**: Дата окончания backtest
 - Тип: datetime
 - Применение: ограничение периода тестирования
 - Формат: 'YYYY-MM-DD'
 - Рекомендация: not более текущей даты

- **`test_data`**: data for тестирования
 - Тип: dataFrame
 - Содержит: data за период тестирования
 - Применение: оценка производительности
 - Требования: отсутствие пропусков
 - Обработка: та же нормализация, что and for train

- **`Predictions`**: Предсказания модели
 - Тип: numpy array
 - Содержит: предсказания for all testsых данных
 - Применение: расчет доходности
 - Формат: бинарные метки (0/1)
 - Интерпретация: 0 = падение, 1 = рост

- **`probabilities`**: Вероятности Predictions
 - Тип: numpy array
 - Содержит: вероятности for каждого класса
 - Применение: оценка уверенности
 - Формат: [prob_class_0, prob_class_1]
 - Интерпретация: from 0 to 1

- **`returns`**: Доходность цены
 - Тип: pandas Series
 - Формула: test_data['close'].pct_change()
 - Применение: расчет доходности стратегии
 - Единицы: безразмерная величина
 - Интерпретация: положительная = рост, отрицательная = падение

- **`strategy_returns`**: Доходность стратегии
 - Тип: pandas Series
 - Формула: Predictions * returns
 - Применение: расчет доходности стратегии
 - Единицы: безразмерная величина
 - Интерпретация: положительная = прибыль, отрицательная = убыток

- **`total_return`**: Общая доходность
 - Тип: float
 - Формула: strategy_returns.sum()
 - Применение: оценка общей производительности
 - Единицы: безразмерная величина
 - Интерпретация: положительная = прибыль, отрицательная = убыток

- **`sharpe_ratio`**: Коэффициент Шарпа
 - Тип: float
 - Формула: strategy_returns.mean() / strategy_returns.std() * np.sqrt(252)
 - Применение: оценка риска-доходности
 - Единицы: безразмерная величина
 - Интерпретация: > 1 = хорошо, > 2 = отлично, > 3 = превосходно

- **`max_drawdown`**: Максимальная просадка
 - Тип: float
 - Применение: оценка максимального убытка
 - Единицы: безразмерная величина
 - Интерпретация: отрицательная величина, чем меньше, тем лучше
 - Расчет: максимальная последовательность убытков

- **`win_rate`**: Процент выигрышных сделок
 - Тип: float
 - Формула: (strategy_returns > 0).mean()
 - Применение: оценка точности сигналов
 - Единицы: безразмерная величина
 - Интерпретация: from 0 to 1, чем больше, тем лучше

- **`train_period`**: Период обучения
 - Тип: int
 - Значение: 252 (дня)
 - Применение: размер окна обучения
 - Единицы: дни
 - Рекомендация: 200-300 дней for SCHR SHORT3

- **`test_period`**: Период тестирования
 - Тип: int
 - Значение: 63 (дня)
 - Применение: размер окна тестирования
 - Единицы: дни
 - Рекомендация: 50-100 дней for SCHR SHORT3

- **`n_simulations`**: Количество симуляций
 - Тип: int
 - Значение: 1000
 - Применение: Monte Carlo анализ
 - Рекомендация: 1000-10000 for SCHR SHORT3
 - Баланс: больше = точнее, но медленнее

- **`sample_data`**: Выборочные data
 - Тип: dataFrame
 - Размер: 80% from исходных данных
 - Применение: случайная выборка for симуляции
 - Обработка: with заменой (replace=True)
 - Требования: отсутствие пропусков

**Практические рекомендации:**

- **Качество данных**: Критично for точности SCHR SHORT3
- **Временные рамки**: Использовать множественные Timeframeы
- **Валидация**: Обязательна for краткосрочных торговых сигналов
- **Риск-менеджмент**: Использовать стоп-лоссы on basis краткосрочных уровней
- **Monitoring**: Постоянный контроль качества краткосрочных сигналов
- **Адаптация**: Регулярное update параметров под краткосрочные изменения рынка
```

## Валидация модели

<img src="images/optimized/validation_short3.png" alt="Методы валидации SHORT3" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.6: Методы валидации SCHR SHORT3 модели - from backtest to stress testing*

**Методы валидации:**
- **Backtest Analysis**: Историческая производительность, расчет доходности, анализ рисков
- **Walk-Forward Analysis**: Скользящее окно, адаптация к рынку, реалистичная оценка
- **Monte Carlo Simulation**: Случайные выборки, статистическая значимость
- **Cross-Validation**: Кросс-валидация, check стабильности
- **Out-of-Sample testing**: Тестирование on новых данных
- **Stress testing**: Тестирование in экстремальных условиях

**Результаты валидации:**
- **Sharpe Ratio**: 2.5
- **Максимальная просадка**: 7.2%
- **Win Rate**: 72.8%
- **Profit Factor**: 2.1
- **Годовая доходность**: 68.4%

### Backtest

```python
def schr_short3_backtest(self, data, start_date, end_date):
 """Backtest модели SCHR SHORT3"""

 # Фильтрация данных on датам
 test_data = data[(data.index >= start_date) & (data.index <= end_date)]

 # Предсказания
 Predictions = self.predictor.predict(test_data)
 probabilities = self.predictor.predict_proba(test_data)

 # Расчет доходности
 returns = test_data['close'].pct_change()
 strategy_returns = Predictions * returns

 # Метрики backtest
 total_return = strategy_returns.sum()
 sharpe_ratio = strategy_returns.mean() / strategy_returns.std() * np.sqrt(252)
 max_drawdown = self.calculate_max_drawdown(strategy_returns)

 return {
 'total_return': total_return,
 'sharpe_ratio': sharpe_ratio,
 'max_drawdown': max_drawdown,
 'win_rate': (strategy_returns > 0).mean()
 }
```

### Walk-Forward Analysis

```python
def schr_short3_walk_forward(self, data, train_period=252, test_period=63):
 """Walk-forward анализ for SCHR SHORT3"""

 results = []

 for i in range(0, len(data) - train_period - test_period, test_period):
 # Обучение
 train_data = data.iloc[i:i+train_period]
 model = self.train_schr_short3_model(train_data)

 # Тестирование
 test_data = data.iloc[i+train_period:i+train_period+test_period]
 test_results = self.schr_short3_backtest(test_data)

 results.append(test_results)

 return results
```

### Monte Carlo Simulation

```python
def schr_short3_monte_carlo(self, data, n_simulations=1000):
 """Monte Carlo симуляция for SCHR SHORT3"""

 results = []

 for i in range(n_simulations):
 # Случайная выборка данных
 sample_data = data.sample(frac=0.8, replace=True)

 # Обучение модели
 model = self.train_schr_short3_model(sample_data)

 # Тестирование
 test_results = self.schr_short3_backtest(sample_data)
 results.append(test_results)

 return results
```

## Деплой on блокчейне

<img src="images/optimized/blockchain_short3.png" alt="integration with блокчейном SHORT3" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.7: integration SCHR SHORT3 with блокчейном - from смарт-контрактов to автоматической торговли*

**components интеграции:**
- **Smart Contracts**: Хранение сигналов, автоматическое выполнение, прозрачность операций
- **DEX integration**: Прямая торговля, ликвидность, децентрализация
- **signal Storage**: Хранение сигналов on блокчейне, неизменяемость
- **Automated Trading**: Автоматическая торговля, исполнение сигналов
- **Risk Management**: Management рисками, лимиты позиций
- **Performance Tracking**: Отслеживание производительности, метрики

**Преимущества блокчейн-интеграции:**
- **Прозрачность**: Все операции видны in блокчейне
- **Децентрализация**: Отсутствие единой точки отказа
- **Автоматизация**: Автоматическое выполнение торговых операций
- **Безопасность**: Криптографическая защита
- **Масштабируемость**: Возможность обработки больших объемов

### create смарт-контракта

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract SCHRShort3TradingContract {
 struct SCHRShort3signal {
 uint256 timestamp;
 int256 shortTermsignal;
 int256 shortTermStrength;
 int256 shortTermDirection;
 int256 shortTermMomentum;
 int256 shortSupport;
 int256 shortResistance;
 int256 shortPivot;
 bool shortBuysignal;
 bool shortSellsignal;
 bool shortHoldsignal;
 bool shortReversesignal;
 uint256 confidence;
 }

 mapping(uint256 => SCHRShort3signal) public signals;
 uint256 public signalCount;

 function addSCHRShort3signal(
 int256 shortTermsignal,
 int256 shortTermStrength,
 int256 shortTermDirection,
 int256 shortTermMomentum,
 int256 shortSupport,
 int256 shortResistance,
 int256 shortPivot,
 bool shortBuysignal,
 bool shortSellsignal,
 bool shortHoldsignal,
 bool shortReversesignal,
 uint256 confidence
 ) external {
 signals[signalCount] = SCHRShort3signal({
 timestamp: block.timestamp,
 shortTermsignal: shortTermsignal,
 shortTermStrength: shortTermStrength,
 shortTermDirection: shortTermDirection,
 shortTermMomentum: shortTermMomentum,
 shortSupport: shortSupport,
 shortResistance: shortResistance,
 shortPivot: shortPivot,
 shortBuysignal: shortBuysignal,
 shortSellsignal: shortSellsignal,
 shortHoldsignal: shortHoldsignal,
 shortReversesignal: shortReversesignal,
 confidence: confidence
 });

 signalCount++;
 }

 function getLatestsignal() external View returns (SCHRShort3signal memory) {
 return signals[signalCount - 1];
 }
}
```

### integration with DEX

```python
class SCHRShort3DEXintegration:
 """integration SCHR SHORT3 with DEX"""

 def __init__(self, contract_address, private_key):
 self.contract_address = contract_address
 self.private_key = private_key
 self.web3 = Web3(Web3.HTTPProvider('https://mainnet.infura.io/v3/YOUR_PROJECT_ID'))

 def execute_schr_short3_trade(self, signal):
 """Выполнение торговли on basis SCHR SHORT3 сигнала"""

 if signal['shortBuysignal'] and signal['confidence'] > 0.8:
 # Краткосрочная покупка
 self.buy_token(signal['amount'])
 elif signal['shortSellsignal'] and signal['confidence'] > 0.8:
 # Краткосрочная продажа
 self.sell_token(signal['amount'])
 elif signal['shortHoldsignal'] and signal['confidence'] > 0.8:
 # Краткосрочное удержание
 self.hold_position(signal['amount'])
 elif signal['shortReversesignal'] and signal['confidence'] > 0.8:
 # Краткосрочный разворот
 self.reverse_trade(signal['amount'])

 def buy_token(self, amount):
 """Покупка токена"""
 # Реализация покупки через DEX
 pass

 def sell_token(self, amount):
 """Продажа токена"""
 # Реализация продажи через DEX
 pass

 def hold_position(self, amount):
 """Удержание позиции"""
 # Реализация holding позиции
 pass

 def reverse_trade(self, amount):
 """Обратная торговля"""
 # Реализация обратной торговли через DEX
 pass
```

## Результаты

<img src="images/optimized/performance_short3.png" alt="Результаты производительности SHORT3" style="max-width: 100%; height: auto; display: block; margin: 20px auto;">
*Рисунок 23.8: Результаты производительности SCHR SHORT3 - метрики, доходность and сравнение*

**Производительность модели:**
- **Точность**: 91.8%
- **Precision**: 91.2%
- **Recall**: 90.8%
- **F1-Score**: 91.0%
- **Sharpe Ratio**: 2.5
- **Максимальная просадка**: 7.2%
- **Годовая доходность**: 68.4%

**Финансовые метрики:**
- **Sharpe Ratio**: 2.5
- **Max Drawdown**: 7.2%
- **Win Rate**: 72.8%
- **Profit Factor**: 2.1

**Доходность on Timeframeм:**
- **M1**: 38.2%
- **M5**: 42.1%
- **M15**: 48.7%
- **H1**: 55.3%
- **H4**: 61.8%
- **D1**: 68.4%
- **W1**: 71.2%
- **MN1**: 68.4%

**Сравнение with другими индикаторами:**
- **SCHR SHORT3**: 68.4%
- **RSI**: 35.2%
- **MACD**: 42.8%
- **Bollinger**: 38.7%
- **SMA**: 41.3%
- **EMA**: 43.1%

### Сильные стороны SCHR SHORT3

1. **Краткосрочная точность** - обеспечивает точные краткосрочные сигналы
2. **Быстрая адаптация** - быстро адаптируется к изменениям рынка
3. **Высокая частота сигналов** - генерирует много торговых возможностей
4. **Низкий лаг** - минимальная задержка in сигналах
5. **Масштабируемость** - Workingет on all Timeframes

### Слабые стороны SCHR SHORT3

1. **Высокая частота** - может генерировать слишком много сигналов
2. **Ложные сигналы** - может генерировать ложные краткосрочные сигналы
3. **dependency from волатильности** - качество зависит from волатильности
4. **Переобучение** - может переобучаться on исторических данных
5. **Сложность** - требует глубокого понимания краткосрочной торговли

## Заключение

SCHR SHORT3 - это мощный индикатор for создания высокоточных ML-моделей краткосрочной торговли. При правильном использовании он может обеспечить стабильную прибыльность and робастность торговой системы.
