# –£–≥–ª—É–±–ª–µ–Ω–Ω–æ–µ description –º–µ—Ç–æ–¥–∏–∫ for —Å–æ–∑–¥–∞–Ω–∏—è and —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio, —É—Å–ø–µ—à–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

**Author:** Shcherbyna Rostyslav
**–î–∞—Ç–∞:** 2024

## Why Management Portfolio - –æ—Å–Ω–æ–≤–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üéØ –í–∞–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio for —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```mermaid
graph TD
 A[–ò–Ω–≤–µ—Å—Ç–æ—Ä] --> B{–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ Management Portfolio?}

 B -->|–ù–µ—Ç| C[90% –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ —Ç–µ—Ä—è—é—Ç –¥–µ–Ω—å–≥–∏]
 C --> D[‚ùå –í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏<br/>–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è in –æ–¥–Ω–æ–º –∞–∫—Ç–∏–≤–µ]
 C --> E[‚ùå –ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å<br/>–†–µ–∑–∫–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏]
 C --> F[‚ùå –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏<br/>–í–æ –≤—Ä–µ–º—è –∫—Ä–∏–∑–∏—Å–æ–≤]
 C --> G[‚ùå –ù–µ–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Ü–µ–ª–µ–π<br/>–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ in –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è—Ö]

 B -->|–î–∞| H[10% —É—Å–ø–µ—à–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤]
 H --> I[‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å<br/>–°–Ω–∏–∂–µ–Ω–∏–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ and —Ä–∏—Å–∫–æ–≤]
 H --> J[‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏<br/>–ü—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ —Ä–∏—Å–∫–∞]
 H --> K[‚úÖ –†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å<br/>–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ä—ã–Ω–æ—á–Ω—ã–º —à–æ–∫–∞–º]
 H --> L[‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å<br/>Management –±–æ–ª—å—à–∏–º–∏ –∫–∞–ø–∏—Ç–∞–ª–∞–º–∏]

 I --> M[–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–∫—Ç–∏–≤–æ–≤]
 J --> N[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤]
 K --> O[Management —Ä–∏—Å–∫–∞–º–∏]
 L --> P[–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥]

 M --> Q[–£—Å–ø–µ—à–Ω—ã–π Portfolio]
 N --> Q
 O --> Q
 P --> Q

 Q --> R[‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏]

 style A fill:#e3f2fd
 style H fill:#c8e6c9
 style C fill:#ffcdd2
 style R fill:#4caf50
```

**–ü–æ—á–µ–º—É 90% –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ —Ç–µ—Ä—è—é—Ç –¥–µ–Ω—å–≥–∏?** –ü–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ not –ø–æ–Ω–∏–º–∞—é—Ç –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è and Management —Ä–∏—Å–∫–∞–º–∏ - —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø—Ä–∏–±—ã–ª—å–Ω—ã–π Portfolio.

### –ß—Ç–æ –¥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ Management Portfolio?

- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –°–Ω–∏–∂–µ–Ω–∏–µ –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏ and —Ä–∏—Å–∫–æ–≤
- **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ —Ä–∏—Å–∫–∞
- **–†–æ–±–∞—Å—Ç–Ω–æ—Å—Ç—å**: –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Ä—ã–Ω–æ—á–Ω—ã–º —à–æ–∫–∞–º
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏–º–∏ –∫–∞–ø–∏—Ç–∞–ª–∞–º–∏

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio?

- **–í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏**: –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è in –æ–¥–Ω–æ–º –∞–∫—Ç–∏–≤–µ or —Å–µ–∫—Ç–æ—Ä–µ
- **–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –†–µ–∑–∫–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ Portfolio
- **–ü–æ—Ç–µ—Ä–∏**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏ –≤–æ –≤—Ä–µ–º—è –∫—Ä–∏–∑–∏—Å–æ–≤
- **–†–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ**: –ù–µ–¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª–µ–π

## –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio

### –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio –∫–∞–∫ –∑–∞–¥–∞—á–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**

```math
max w^T Œº - Œª/2 * w^T Œ£ w
subject to: w^T 1 = 1, w ‚â• 0
```

–ì–¥–µ:

- `w` - –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio
- `Œº` - –æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–æ–≤
- `Œ£` - –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤
- `Œª` - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —Ä–∏—Å–∫–∞

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞ Portfolio:**

1. **–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å**: E[R_p] = w^T Œº
2. **–†–∏—Å–∫**: Var[R_p] = w^T Œ£ w
3. **–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞**: (E[R_p] - r_f) / ‚àöVar[R_p]
4. **VaR**: P(R_p ‚â§ VaR) = Œ±

### –¢–∏–ø—ã Portfolio

### üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ Portfolio

```mermaid
graph TB
 A[–¢–∏–ø—ã Portfolio] --> B[–ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–µ Portfolio]
 A --> C[–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ Portfolio]
 A --> D[–ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ Portfolio]
 A --> E[–î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ Portfolio]

 B --> B1[–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫, –Ω–∏–∑–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Risk: 5-10%, Return: 3-6%]
 B --> B2[–û–±–ª–∏–≥–∞—Ü–∏–∏, –¥–µ–ø–æ–∑–∏—Ç—ã<br/>Government bonds, CDs]
 B --> B3[‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç for –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤<br/>–ü–µ–Ω—Å–∏–æ–Ω–µ—Ä—ã, –Ω–æ–≤–∏—á–∫–∏]
 B --> B4[üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –∫–∞–ø–∏—Ç–∞–ª–∞<br/>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏]
 B --> B5[üìà –°—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–æ—Å—Ç<br/>–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã]

 C --> C1[–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫, —Å—Ä–µ–¥–Ω—è—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Risk: 10-15%, Return: 6-10%]
 C --> C2[–°–º–µ—Å—å –∞–∫—Ü–∏–π and –æ–±–ª–∏–≥–∞—Ü–∏–π<br/>60% Stocks, 40% Bonds]
 C --> C3[‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç for –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤<br/>–°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç, –æ–ø—ã—Ç]
 C --> C4[‚öñÔ∏è –ë–∞–ª–∞–Ω—Å —Ä–∏—Å–∫–∞ and –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏<br/>–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ]
 C --> C5[üîÑ –ì–∏–±–∫–æ—Å—Ç—å<br/>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏]

 D --> D1[–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –≤—ã—Å–æ–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Risk: 15-25%, Return: 10-15%]
 D --> D2[–ê–∫—Ü–∏–∏, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏<br/>Stocks, REITs, Commodities]
 D --> D3[‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç for –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤<br/>–ú–æ–ª–æ–¥—ã–µ, –æ–ø—ã—Ç–Ω—ã–µ]
 D --> D4[üöÄ –í—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Ä–æ—Å—Ç–∞<br/>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å]
 D --> D5[‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å<br/>–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è]

 E --> E1[–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Risk: 8-12%, Return: 8-12%]
 E --> E2[–†–∞–∑–ª–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∞–∫—Ç–∏–≤–æ–≤<br/>Stocks, Bonds, REITs, Commodities, Cash]
 E --> E3[‚úÖ –ù–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ<br/>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–æ—Ä—ã]
 E --> E4[üéØ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>–°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π]
 E --> E5[üìä –ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥<br/>–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è]

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#fff3e0
 style D fill:#ffcdd2
 style E fill:#4caf50
```

#### 1. –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–µ Portfolio

- –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫, –Ω–∏–∑–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
- –û–±–ª–∏–≥–∞—Ü–∏–∏, –¥–µ–ø–æ–∑–∏—Ç—ã
- –ü–æ–¥—Ö–æ–¥–∏—Ç for –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

#### 2. –°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ Portfolio

- –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫, —Å—Ä–µ–¥–Ω—è—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
- –°–º–µ—Å—å –∞–∫—Ü–∏–π and –æ–±–ª–∏–≥–∞—Ü–∏–π
- –ü–æ–¥—Ö–æ–¥–∏—Ç for –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

#### 3. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ Portfolio

- –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫, –≤—ã—Å–æ–∫–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
- –ê–∫—Ü–∏–∏, –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
- –ü–æ–¥—Ö–æ–¥–∏—Ç for –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

#### 4. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ Portfolio

- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∏—Å–∫/–¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
- –†–∞–∑–ª–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∞–∫—Ç–∏–≤–æ–≤
- –ù–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥–∏–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è Portfolio

### 1. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üîß –ú–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Portfolio

```mermaid
graph TD
 A[–ú–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Portfolio] --> B[–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã]
 A --> C[–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã]
 A --> D[ML-–º–µ—Ç–æ–¥—ã]

 B --> B1[Markowitz Mean-Variance<br/>max w^T Œº - Œª/2 * w^T Œ£ w]
 B --> B2[Black-Litterman Model<br/>Incorporates market Views]
 B --> B3[Capital Asset Pricing Model<br/>CAPM framework]

 C --> C1[Risk Parity Portfolio<br/>Equal risk contribution]
 C --> C2[Minimum Variance Portfolio<br/>Minimize Portfolio variance]
 C --> C3[Maximum Sharpe Portfolio<br/>Maximize Sharpe ratio]
 C --> C4[Equal Weight Portfolio<br/>1/N allocation]

 D --> D1[Clustering-based Portfolio<br/>K-means, Hierarchical]
 D --> D2[ML-based Optimization<br/>Random Forest, Neural networks]
 D --> D3[Factor-based Portfolio<br/>Fama-French factors]
 D --> D4[Reinforcement Learning<br/>Dynamic optimization]

 B1 --> E[–¶–µ–ª–µ–≤–∞—è function<br/>Utility = Return - Œª * Risk]
 B2 --> F[–í–∫–ª—é—á–µ–Ω–∏–µ –≤–∑–≥–ª—è–¥–æ–≤<br/>P * Œº = Q + Œµ]
 C1 --> G[–†–∞–≤–Ω—ã–π –≤–∫–ª–∞–¥ in —Ä–∏—Å–∫<br/>w_i * œÉ_i = constant]
 C2 --> H[–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–µ—Ä—Å–∏–∏<br/>min w^T Œ£ w]
 C3 --> I[–ú–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è Sharpe<br/>max (Œº - r_f) / œÉ]

 D1 --> J[–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–æ–≤<br/>Similar assets grouped]
 D2 --> K[ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è<br/>Predict returns/risks]
 D3 --> L[–§–∞–∫—Ç–æ—Ä–Ω–∞—è –º–æ–¥–µ–ª—å<br/>R = Œ± + Œ≤ * F + Œµ]
 D4 --> M[–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ<br/>Q-learning, Policy gradient]

 E --> N[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio]
 F --> N
 G --> N
 H --> N
 I --> N
 J --> N
 K --> N
 L --> N
 M --> N

 N --> O[–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞<br/>w* = argmax Utility]
 O --> P[–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏<br/>Sharpe, VaR, Max DD]

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#fff3e0
 style D fill:#f3e5f5
 style O fill:#4caf50
```

**Markowitz Mean-Variance Optimization:**

```python
def markowitz_optimization(expected_returns, cov_matrix, risk_aversion=1.0,
 target_return=None, target_volatility=None):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio on Markowitz

 Parameters:
 -----------
 expected_returns : array-like, shape (n_assets,)
 –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ or List
 with –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ for –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞ in Portfolio.
 example: [0.08, 0.12, 0.06, 0.10] for 4 –∞–∫—Ç–∏–≤–æ–≤

 cov_matrix : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π
 —Ä–∞–∑–º–µ—Ä–æ–º n_assets x n_assets, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç (i,j) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç
 –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ i and j. –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π
 and –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π.

 risk_aversion : float, default=1.0
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–ø—Ä–∏—è—Ç–∏—è —Ä–∏—Å–∫–∞. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é
 and —Ä–∏—Å–∫–æ–º in —Ü–µ–ª–µ–≤–æ–π functions. –ß–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –±–æ–ª—å—à–µ
 –∏–Ω–≤–µ—Å—Ç–æ—Ä –∏–∑–±–µ–≥–∞–µ—Ç —Ä–∏—Å–∫–∞:
 - 0.5: –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä (–Ω–∏–∑–∫–æ–µ –Ω–µ–ø—Ä–∏—è—Ç–∏–µ —Ä–∏—Å–∫–∞)
 - 1.0: –£–º–µ—Ä–µ–Ω–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
 - 2.0: –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä (–≤—ã—Å–æ–∫–æ–µ –Ω–µ–ø—Ä–∏—è—Ç–∏–µ —Ä–∏—Å–∫–∞)
 - 5.0: –û—á–µ–Ω—å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –∏–Ω–≤–µ—Å—Ç–æ—Ä

 target_return : float, optional, default=None
 –¶–µ–ª–µ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio. if specified–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç
 –∏—Å–∫–∞—Ç—å Portfolio with –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏.
 –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å in —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ and expected_returns (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.10 for 10%).
 –ï—Å–ª–∏ None, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è on –∫—Ä–∏—Ç–µ—Ä–∏—é –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏.

 target_volatility : float, optional, default=None
 –¶–µ–ª–µ–≤–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å Portfolio. if specified–∞, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É–¥–µ—Ç
 –∏—Å–∫–∞—Ç—å Portfolio with –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å—é –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏.
 –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å in —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ and expected_returns (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.15 for 15%).
 –ï—Å–ª–∏ None, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç—Å—è on –∫—Ä–∏—Ç–µ—Ä–∏—é –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏.

 Returns:
 --------
 array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio. –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.
 –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–ª—é –∫–∞–ø–∏—Ç–∞–ª–∞, –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ in —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∞–∫—Ç–∏–≤.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è)

 Notes:
 ------
 –¶–µ–ª–µ–≤–∞—è function: max w^T * Œº - (Œª/2) * w^T * Œ£ * w
 –≥–¥–µ w - –≤–µ—Å–∞, Œº - –æ–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, Œ£ - –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞, Œª - risk_aversion

 –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
 - –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 1 (–ø–æ–ª–Ω–æ–µ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
 - –í–µ—Å–∞ >= 0 (–∑–∞–ø—Ä–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–æ–¥–∞–∂)
 - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å or –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (if specified—ã)
 """
 from scipy.optimize import minimize

 n_assets = len(expected_returns)

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
 constraints = [{'type': 'eq', 'fun': lambda w: np.sum(w) - 1}] # –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 1

 if target_return is not None:
 constraints.append({
 'type': 'eq',
 'fun': lambda w: np.dot(w, expected_returns) - target_return
 })

 if target_volatility is not None:
 constraints.append({
 'type': 'eq',
 'fun': lambda w: np.sqrt(np.dot(w, np.dot(cov_matrix, w))) - target_volatility
 })

 # –ì—Ä–∞–Ω–∏—Ü—ã
 bounds = [(0, 1) for _ in range(n_assets)] # –í–µ—Å–∞ from 0 to 1

 # –¶–µ–ª–µ–≤–∞—è function
 def objective(w):
 Portfolio_return = np.dot(w, expected_returns)
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 return -Portfolio_return + risk_aversion * Portfolio_variance

 # –ù–∞—á–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞
 x0 = np.ones(n_assets) / n_assets

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights = markowitz_optimization(expected_returns, cov_matrix, risk_aversion=1.0)
```

**Black-Litterman Model:**

```python
def black_litterman_optimization(market_caps, cov_matrix, risk_aversion=3.0,
 Views=None, View_confidences=None):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio on –º–æ–¥–µ–ª–∏ Black-Litterman

 –ú–æ–¥–µ–ª—å Black-Litterman –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–µ –≤–µ—Å–∞ with —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–º–∏ –≤–∑–≥–ª—è–¥–∞–º–∏
 –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ for –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö and –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã—Ö –≤–µ—Å–æ–≤ Portfolio.

 Parameters:
 -----------
 market_caps : array-like, shape (n_assets,)
 –†—ã–Ω–æ—á–Ω—ã–µ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–æ–≤. –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è for —Ä–∞—Å—á–µ—Ç–∞ —Ä—ã–Ω–æ—á–Ω—ã—Ö –≤–µ—Å–æ–≤
 –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ or List
 with —Ä—ã–Ω–æ—á–Ω—ã–º–∏ –∫–∞–ø–∏—Ç–∞–ª–∏–∑–∞—Ü–∏—è–º–∏ for –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞.
 example: [1000000, 2000000, 500000, 1500000] for 4 –∞–∫—Ç–∏–≤–æ–≤

 cov_matrix : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π
 —Ä–∞–∑–º–µ—Ä–æ–º n_assets x n_assets, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç (i,j) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç
 –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ i and j. –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π
 and –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π.

 risk_aversion : float, default=3.0
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–ø—Ä–∏—è—Ç–∏—è —Ä–∏—Å–∫–∞ —Ä—ã–Ω–∫–∞. –û–±—ã—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è from 1.0 to 5.0.
 –ß–µ–º –±–æ–ª—å—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –±–æ–ª—å—à–µ —Ä—ã–Ω–æ–∫ –∏–∑–±–µ–≥–∞–µ—Ç —Ä–∏—Å–∫–∞:
 - 1.0-2.0: –ù–∏–∑–∫–æ–µ –Ω–µ–ø—Ä–∏—è—Ç–∏–µ —Ä–∏—Å–∫–∞ (–∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ä—ã–Ω–æ–∫)
 - 3.0: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ for —Ä–∞–∑–≤–∏—Ç—ã—Ö —Ä—ã–Ω–∫–æ–≤
 - 4.0-5.0: –í—ã—Å–æ–∫–æ–µ –Ω–µ–ø—Ä–∏—è—Ç–∏–µ —Ä–∏—Å–∫–∞ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π —Ä—ã–Ω–æ–∫)

 Views : List of tuples, optional, default=None
 –°—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã–µ –≤–∑–≥–ª—è–¥—ã –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞ on –∞–∫—Ç–∏–≤—ã. –ö–∞–∂–¥—ã–π –≤–∑–≥–ª—è–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω
 –∫–æ—Ä—Ç–µ–∂–µ–º (P, Q), –≥–¥–µ P - –≤–µ–∫—Ç–æ—Ä –∞–∫—Ç–∏–≤–æ–≤, Q - –æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å.
 –§–æ—Ä–º–∞—Ç: [(P1, Q1), (P2, Q2), ...]
 example: [([1, 0, 0, 0], 0.12), ([0, 1, -1, 0], 0.05)]
 - –ü–µ—Ä–≤—ã–π –≤–∑–≥–ª—è–¥: –∞–∫—Ç–∏–≤ 1 –±—É–¥–µ—Ç –∏–º–µ—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å 12%
 - –í—Ç–æ—Ä–æ–π –≤–∑–≥–ª—è–¥: –∞–∫—Ç–∏–≤ 2 –±—É–¥–µ—Ç on 5% –ª—É—á—à–µ –∞–∫—Ç–∏–≤–∞ 3
 –ï—Å–ª–∏ None, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä—ã–Ω–æ—á–Ω–∞—è –º–æ–¥–µ–ª—å.

 View_confidences : array-like, optional, default=None
 –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å in –∫–∞–∂–¥–æ–º –≤–∑–≥–ª—è–¥–µ. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤
 with —Ç–µ–º –∂–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —á—Ç–æ and Views. –ó–Ω–∞—á–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å
 –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º–∏ (—á–µ–º –±–æ–ª—å—à–µ, —Ç–µ–º –≤—ã—à–µ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å):
 - 0.1: –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (—Å–ª–∞–±—ã–π –≤–∑–≥–ª—è–¥)
 - 0.5: –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å
 - 1.0: –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (—Å–∏–ª—å–Ω—ã–π –≤–∑–≥–ª—è–¥)
 –ï—Å–ª–∏ None, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ 0.1 for all –≤–∑–≥–ª—è–¥–æ–≤.

 Returns:
 --------
 tuple
 (weights, expected_returns, Portfolio_cov)

 weights : array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio. –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.

 expected_returns : array-like, shape (n_assets,)
 –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤ with —É—á–µ—Ç–æ–º –≤–∑–≥–ª—è–¥–æ–≤ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞.

 Portfolio_cov : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ Portfolio with —É—á–µ—Ç–æ–º –≤–∑–≥–ª—è–¥–æ–≤.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö not —Å–æ–≤–ø–∞–¥–∞—é—Ç or –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å

 Notes:
 ------
 –ú–æ–¥–µ–ª—å Black-Litterman —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π
 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Markowitz –ø—É—Ç–µ–º:
 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö –≤–µ—Å–æ–≤ –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–∏
 2. –í–∫–ª—é—á–µ–Ω–∏—è —Å—É–±—ä–µ–∫—Ç–∏–≤–Ω—ã—Ö –≤–∑–≥–ª—è–¥–æ–≤ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
 3. –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —Ä—ã–Ω–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ and –≤–∑–≥–ª—è–¥–∞–º–∏

 –§–æ—Ä–º—É–ª–∞ –æ–∂–∏–¥–∞–µ–º—ã—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π:
 E[R] = [(œÑŒ£)^(-1) + P^T * Œ©^(-1) * P]^(-1) * [(œÑŒ£)^(-1) * Œ† + P^T * Œ©^(-1) * Q]
 –≥–¥–µ œÑ - –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—â–∏–π parameter, Œ© - –º–∞—Ç—Ä–∏—Ü–∞ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤–æ –≤–∑–≥–ª—è–¥–∞—Ö
 """
 n_assets = len(market_caps)

 # –†—ã–Ω–æ—á–Ω—ã–µ –≤–µ—Å–∞
 market_weights = market_caps / np.sum(market_caps)

 # –û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å —Ä—ã–Ω–∫–∞
 market_return = risk_aversion * np.dot(cov_matrix, market_weights)

 if Views is not None:
 # –ú–∞—Ç—Ä–∏—Ü–∞ –≤–∑–≥–ª—è–¥–æ–≤
 P = np.array(Views)
 n_Views = len(Views)

 # –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤–æ –≤–∑–≥–ª—è–¥–∞—Ö
 if View_confidences is None:
 View_confidences = np.ones(n_Views) * 0.1

 # –ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–∏ –≤–∑–≥–ª—è–¥–æ–≤
 Omega = np.diag(View_confidences)

 # –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –≤–∑–≥–ª—è–¥–æ–≤
 Q = np.array([View[1] for View in Views])

 # Black-Litterman —Ñ–æ—Ä–º—É–ª—ã
 tau = 1.0 # –ú–∞—Å—à—Ç–∞–±–∏—Ä—É—é—â–∏–π parameter
 M1 = np.linalg.inv(tau * cov_matrix)
 M2 = np.dot(P.T, np.dot(np.linalg.inv(Omega), P))
 M3 = np.dot(P.T, np.dot(np.linalg.inv(Omega), Q))

 # –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
 expected_returns = np.dot(np.linalg.inv(M1 + M2),
 np.dot(M1, market_return) + M3)

 # –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
 Portfolio_cov = np.linalg.inv(M1 + M2)
 else:
 expected_returns = market_return
 Portfolio_cov = cov_matrix

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Markowitz
 weights = markowitz_optimization(expected_returns, Portfolio_cov, risk_aversion)

 return weights, expected_returns, Portfolio_cov

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights, expected_returns, Portfolio_cov = black_litterman_optimization(
 market_caps, cov_matrix, risk_aversion=3.0, Views=Views
)
```

### 2. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**Risk Parity Portfolio:**

```python
def risk_parity_optimization(cov_matrix, target_risk=None):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio with —Ä–∞–≤–Ω—ã–º –≤–∫–ª–∞–¥–æ–º in —Ä–∏—Å–∫ (Risk Parity)

 Risk Parity - —ç—Ç–æ –º–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Portfolio, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∫–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤
 –≤–Ω–æ—Å–∏—Ç —Ä–∞–≤–Ω—ã–π –≤–∫–ª–∞–¥ in –æ–±—â–∏–π —Ä–∏—Å–∫ Portfolio. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–æ–ª–µ–µ
 —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—é —Ä–∏—Å–∫–∞ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏.

 Parameters:
 -----------
 cov_matrix : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π
 —Ä–∞–∑–º–µ—Ä–æ–º n_assets x n_assets, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç (i,j) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç
 –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ i and j. –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π
 and –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π.

 target_risk : float, optional, default=None
 –¶–µ–ª–µ–≤–æ–π —É—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ Portfolio. if specified, Portfolio –±—É–¥–µ—Ç
 –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ for –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –ø—Ä–∏ —Ä–∞–≤–Ω–æ–º
 —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–∞ in —Ä–∏—Å–∫ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏.
 - None: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on –æ–±—â–∏–π —Ä–∏—Å–∫
 - 0.10: –¶–µ–ª–µ–≤–æ–π —Ä–∏—Å–∫ 10% (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
 - 0.15: –¶–µ–ª–µ–≤–æ–π —Ä–∏—Å–∫ 15%
 - 0.20: –¶–µ–ª–µ–≤–æ–π —Ä–∏—Å–∫ 20%

 Returns:
 --------
 array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio. –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.
 –ö–∞–∂–¥—ã–π –∞–∫—Ç–∏–≤ –≤–Ω–æ—Å–∏—Ç —Ä–∞–≤–Ω—ã–π –≤–∫–ª–∞–¥ in –æ–±—â–∏–π —Ä–∏—Å–∫ Portfolio.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å or –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

 Notes:
 ------
 Risk Parity —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É:
 min Œ£·µ¢ Œ£‚±º (w·µ¢ * œÉ·µ¢ - w‚±º * œÉ‚±º)¬≤
 subject to: Œ£·µ¢ w·µ¢ = 1, w·µ¢ ‚â• 0

 –≥–¥–µ w·µ¢ - –≤–µ—Å –∞–∫—Ç–∏–≤–∞ i, œÉ·µ¢ - –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–∞ i

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Risk Parity:
 1. –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Å–∞ on —Å—Ä–∞–≤–Ω–µ–Ω–∏—é with Markowitz
 2. –õ—É—á—à–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∏—Å–∫–∞
 3. –ú–µ–Ω—å—à–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º in –æ—Ü–µ–Ω–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 4. –ë–æ–ª–µ–µ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –ú–æ–∂–µ—Ç not –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
 2. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º for –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ with —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏
 """
 from scipy.optimize import minimize

 n_assets = len(cov_matrix)

 # –¶–µ–ª–µ–≤–∞—è function - –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Å—É–º–º—ã –∫–≤–∞–¥—Ä–∞—Ç–æ–≤ —Ä–∞–∑–Ω–æ—Å—Ç–µ–π —Ä–∏—Å–∫–æ–≤
 def objective(w):
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 individual_risks = np.sqrt(np.diag(cov_matrix))
 target_risks = w * individual_risks

 # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
 if target_risk is not None:
 target_risks = target_risks / np.sum(target_risks) * target_risk

 return np.sum((target_risks - target_risks.mean()) ** 2)

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
 constraints = [{'type': 'eq', 'fun': lambda w: np.sum(w) - 1}]
 bounds = [(0, 1) for _ in range(n_assets)]

 # –ù–∞—á–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞
 x0 = np.ones(n_assets) / n_assets

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights = risk_parity_optimization(cov_matrix, target_risk=0.1)
```

**Minimum Variance Portfolio:**

```python
def minimum_variance_optimization(cov_matrix):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio with –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–µ–π (Minimum Variance Portfolio)

 Minimum Variance Portfolio - —ç—Ç–æ Portfolio with –Ω–∞–∏–º–µ–Ω—å—à–µ–π –≤–æ–∑–º–æ–∂–Ω–æ–π
 –¥–∏—Å–ø–µ—Ä—Å–∏–µ–π (—Ä–∏—Å–∫–æ–º) —Å—Ä–µ–¥–∏ all –≤–æ–∑–º–æ–∂–Ω—ã—Ö Portfolio. –≠—Ç–æ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π
 –ø–æ–¥—Ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å Portfolio.

 Parameters:
 -----------
 cov_matrix : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π
 —Ä–∞–∑–º–µ—Ä–æ–º n_assets x n_assets, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç (i,j) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç
 –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ i and j. –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π
 and –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π.

 Returns:
 --------
 array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio with –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∏—Å–ø–µ—Ä—Å–∏–µ–π.
 –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å or –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

 Notes:
 ------
 Minimum Variance Portfolio —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É:
 min w^T * Œ£ * w
 subject to: Œ£·µ¢ w·µ¢ = 1, w·µ¢ ‚â• 0

 –≥–¥–µ w - –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤, Œ£ - –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞

 –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
 w* = (Œ£^(-1) * 1) / (1^T * Œ£^(-1) * 1)

 –≥–¥–µ 1 - –≤–µ–∫—Ç–æ—Ä –∏–∑ –µ–¥–∏–Ω–∏—Ü

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫ —Å—Ä–µ–¥–∏ all –≤–æ–∑–º–æ–∂–Ω—ã—Ö Portfolio
 2. –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å—á–µ—Ç–∞ and –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
 3. –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤–µ—Å–æ–≤
 4. –ü–æ–¥—Ö–æ–¥–∏—Ç for –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–∏–∑–∫—É—é –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
 2. not —É—á–∏—Ç—ã–≤–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
 3. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º for –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤ with –¥—Ä—É–≥–∏–º–∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏
 4. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º in –æ—Ü–µ–Ω–∫–µ –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã
 """
 from scipy.optimize import minimize

 n_assets = len(cov_matrix)

 # –¶–µ–ª–µ–≤–∞—è function - –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–∏—Å–ø–µ—Ä—Å–∏–∏
 def objective(w):
 return np.dot(w, np.dot(cov_matrix, w))

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
 constraints = [{'type': 'eq', 'fun': lambda w: np.sum(w) - 1}]
 bounds = [(0, 1) for _ in range(n_assets)]

 # –ù–∞—á–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞
 x0 = np.ones(n_assets) / n_assets

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights = minimum_variance_optimization(cov_matrix)
```

**Maximum Sharpe Portfolio:**

```python
def maximum_sharpe_optimization(expected_returns, cov_matrix, risk_free_rate=0.02):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio with –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –®–∞—Ä–ø–∞

 Maximum Sharpe Portfolio - —ç—Ç–æ Portfolio, –∫–æ—Ç–æ—Ä–æ–µ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ—Ç
 –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞ (–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ —Ä–∏—Å–∫—É).
 –≠—Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π Portfolio for –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
 –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å on –µ–¥–∏–Ω–∏—Ü—É —Ä–∏—Å–∫–∞.

 Parameters:
 -----------
 expected_returns : array-like, shape (n_assets,)
 –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤ or List
 with –æ–∂–∏–¥–∞–µ–º—ã–º–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ for –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞ in Portfolio.
 example: [0.08, 0.12, 0.06, 0.10] for 4 –∞–∫—Ç–∏–≤–æ–≤

 cov_matrix : array-like, shape (n_assets, n_assets)
 –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞ –∞–∫—Ç–∏–≤–æ–≤. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–π –º–∞—Ç—Ä–∏—Ü–µ–π
 —Ä–∞–∑–º–µ—Ä–æ–º n_assets x n_assets, –≥–¥–µ —ç–ª–µ–º–µ–Ω—Ç (i,j) –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç
 –∫–æ–≤–∞—Ä–∏–∞—Ü–∏—é –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏ i and j. –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–π
 and –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π.

 risk_free_rate : float, default=0.02
 –ë–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è for —Ä–∞—Å—á–µ—Ç–∞ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π
 –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ in –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ –®–∞—Ä–ø–∞. –û–±—ã—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è:
 - 0.01: 1% (–æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Å—Ç–∞–≤–∫–∞)
 - 0.02: 2% (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ for —Ä–∞–∑–≤–∏—Ç—ã—Ö —Ä—ã–Ω–∫–æ–≤)
 - 0.03: 3% (—É–º–µ—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞)
 - 0.05: 5% (–≤—ã—Å–æ–∫–∞—è —Å—Ç–∞–≤–∫–∞)

 Returns:
 --------
 array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio with –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –®–∞—Ä–ø–∞.
 –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å or –≤—Ö–æ–¥–Ω—ã–µ data –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

 Notes:
 ------
 Maximum Sharpe Portfolio —Ä–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É:
 max (w^T * Œº - r_f) / ‚àö(w^T * Œ£ * w)
 subject to: Œ£·µ¢ w·µ¢ = 1, w·µ¢ ‚â• 0

 –≥–¥–µ w - –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤, Œº - –æ–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏, Œ£ - –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞,
 r_f - –±–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞

 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞:
 Sharpe = (E[R_p] - r_f) / œÉ_p

 –≥–¥–µ E[R_p] - –æ–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio, œÉ_p - –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å Portfolio

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –ú–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å on –µ–¥–∏–Ω–∏—Ü—É —Ä–∏—Å–∫–∞
 2. –£—á–∏—Ç—ã–≤–∞–µ—Ç –∫–∞–∫ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, —Ç–∞–∫ and —Ä–∏—Å–∫
 3. –®–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è in –ø—Ä–∞–∫—Ç–∏–∫–µ
 4. –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º in –æ—Ü–µ–Ω–∫–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 2. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
 3. not —É—á–∏—Ç—ã–≤–∞–µ—Ç –∞—Å–∏–º–º–µ—Ç—Ä–∏—é and —ç–∫—Å—Ü–µ—Å—Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
 4. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 """
 from scipy.optimize import minimize

 n_assets = len(expected_returns)

 # –¶–µ–ª–µ–≤–∞—è function - –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –®–∞—Ä–ø–∞
 def objective(w):
 Portfolio_return = np.dot(w, expected_returns)
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 sharpe = (Portfolio_return - risk_free_rate) / np.sqrt(Portfolio_variance)
 return -sharpe # –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ–º –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π Sharpe

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
 constraints = [{'type': 'eq', 'fun': lambda w: np.sum(w) - 1}]
 bounds = [(0, 1) for _ in range(n_assets)]

 # –ù–∞—á–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞
 x0 = np.ones(n_assets) / n_assets

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights = maximum_sharpe_optimization(expected_returns, cov_matrix, risk_free_rate=0.02)
```

### 3. –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ in —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ Portfolio

### ü§ñ integration –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è in Management Portfolio

```mermaid
graph TD
 A[ML in —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ Portfolio] --> B[Prediction –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π]
 A --> C[–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–æ–≤]
 A --> D[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio]
 A --> E[Management —Ä–∏—Å–∫–∞–º–∏]
 A --> F[–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞]

 B --> B1[Time Series Models<br/>LSTM, GRU, Transformer]
 B --> B2[Ensemble Methods<br/>Random Forest, XGBoost]
 B --> B3[Deep Learning<br/>Neural networks, CNN]
 B --> B4[Feature Engineering<br/>Technical indicators, Sentiment]

 C --> C1[K-means Clustering<br/>Group similar assets]
 C --> C2[Hierarchical Clustering<br/>Dendrogram-based grouping]
 C --> C3[DBSCAN<br/>Density-based clustering]
 C --> C4[Gaussian Mixture<br/>ProbabiListic clustering]

 D --> D1[Reinforcement Learning<br/>Q-learning, Policy Gradient]
 D --> D2[Genetic Algorithms<br/>Evolutionary optimization]
 D --> D3[Bayesian Optimization<br/>Gaussian Process optimization]
 D --> D4[Multi-objective Optimization<br/>Pareto frontier]

 E --> E1[VaR Prediction<br/>ML-based VaR estimation]
 E --> E2[Stress testing<br/>Scenario generation with ML]
 E --> E3[Anomaly Detection<br/>Outlier detection in returns]
 E --> E4[Regime Detection<br/>Market regime classification]

 F --> F1[signal Generation<br/>ML-based trading signals]
 F --> F2[Threshold Optimization<br/>Dynamic rebalancing thresholds]
 F --> F3[Transaction Cost Modeling<br/>Cost-aware rebalancing]
 F --> F4[Market MicroStructure<br/>Order book Analysis]

 B1 --> G[ML Pipeline]
 B2 --> G
 B3 --> G
 B4 --> G
 C1 --> G
 C2 --> G
 C3 --> G
 C4 --> G
 D1 --> G
 D2 --> G
 D3 --> G
 D4 --> G
 E1 --> G
 E2 --> G
 E3 --> G
 E4 --> G
 F1 --> G
 F2 --> G
 F3 --> G
 F4 --> G

 G --> H[–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π<br/>Train on historical data]
 H --> I[–í–∞–ª–∏–¥–∞—Ü–∏—è<br/>Cross-validation, Walk-forward]
 I --> J[–î–µ–ø–ª–æ–π in –ø—Ä–æ–¥–∞–∫—à–µ–Ω<br/>Real-time Predictions]
 J --> K[Monitoring –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏<br/>Model performance tracking]

 K --> L{–ú–æ–¥–µ–ª—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞?}
 L -->|–î–∞| M[‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ]
 L -->|–ù–µ—Ç| N[‚ùå –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å]

 N --> O[–ê–Ω–∞–ª–∏–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏<br/>Identify performance decline]
 O --> P[update –¥–∞–Ω–Ω—ã—Ö<br/>Include new market data]
 P --> Q[–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ<br/>Retrain with updated data]
 Q --> R[–í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏<br/>Test on out-of-sample data]
 R --> S[–î–µ–ø–ª–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏<br/>Replace old model]
 S --> K

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#fff3e0
 style D fill:#f3e5f5
 style E fill:#ffcdd2
 style F fill:#e1f5fe
 style M fill:#4caf50
 style N fill:#ff9800
```

**Clustering-based Portfolio:**

```python
def clustering_Portfolio_optimization(returns, n_clusters=5, method='kmeans'):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio on basis –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –∞–∫—Ç–∏–≤–æ–≤

 –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∞–∫—Ç–∏–≤—ã in –∫–ª–∞—Å—Ç–µ—Ä—ã on basis –∏—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π,
 –∞ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ Portfolio for –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞.
 –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—É—á—à–µ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Portfolio and —É—á–∏—Ç—ã–≤–∞—Ç—å
 —Å—Ö–æ–¥—Å—Ç–≤–æ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏.

 Parameters:
 -----------
 returns : pandas.dataFrame, shape (n_periods, n_assets)
 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –∞–∫—Ç–∏–≤–æ–≤. –°—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã,
 —Å—Ç–æ–ª–±—Ü—ã - –∞–∫—Ç–∏–≤—ã. data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å in —Ñ–æ—Ä–º–∞—Ç–µ pandas dataFrame
 with index–∞–º–∏ –¥–∞—Ç and –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∞–∫—Ç–∏–≤–æ–≤ in —Å—Ç–æ–ª–±—Ü–∞—Ö.
 example: dataFrame with index–∞–º–∏ –¥–∞—Ç and —Å—Ç–æ–ª–±—Ü–∞–º–∏ ['AAPL', 'GOOGL', 'MSFT', 'TSLA']

 n_clusters : int, default=5
 –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ for –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
 - 3-5: for –Ω–µ–±–æ–ª—å—à–æ–≥–æ Portfolio (10-20 –∞–∫—Ç–∏–≤–æ–≤)
 - 5-8: for —Å—Ä–µ–¥–Ω–µ–≥–æ Portfolio (20-50 –∞–∫—Ç–∏–≤–æ–≤)
 - 8-12: for –±–æ–ª—å—à–æ–≥–æ Portfolio (50+ –∞–∫—Ç–∏–≤–æ–≤)
 - –°–ª–∏—à–∫–æ–º –º–∞–ª–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤: –º–æ–∂–µ—Ç not —É—á–µ—Å—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏
 - –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤: –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—é

 method : str, default='kmeans'
 –ú–µ—Ç–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ for –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–æ–≤. –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
 - 'kmeans': K-means –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è (–±—ã—Å—Ç—Ä–∞—è, –ø–æ–¥—Ö–æ–¥–∏—Ç for —Å—Ñ–µ—Ä–∏—á–µ—Å–∫–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤)
 - 'hierarchical': –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è (–º–µ–¥–ª–µ–Ω–Ω–∞—è, –ø–æ–¥—Ö–æ–¥–∏—Ç for –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ª—é–±–æ–π —Ñ–æ—Ä–º—ã)

 Returns:
 --------
 dict
 –°–ª–æ–≤–∞—Ä—å with –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö and –∏—Ö –≤–µ—Å–∞—Ö. –ö–ª—é—á–∏ - ID –∫–ª–∞—Å—Ç–µ—Ä–∞,
 –∑–Ω–∞—á–µ–Ω–∏—è - —Å–ª–æ–≤–∞—Ä–∏ with –∫–ª—é—á–∞–º–∏:
 - 'weights': array-like, shape (n_assets_in_cluster,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in –∫–ª–∞—Å—Ç–µ—Ä–µ
 - 'assets': List
 List –Ω–∞–∑–≤–∞–Ω–∏–π –∞–∫—Ç–∏–≤–æ–≤ in –∫–ª–∞—Å—Ç–µ—Ä–µ

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –º–µ—Ç–æ–¥ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω or data –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

 Notes:
 ------
 –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:
 1. –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
 2. –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –∞–∫—Ç–∏–≤–æ–≤ on –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º
 3. for –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞:
 - –†–∞—Å—á–µ—Ç –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã
 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è)
 - –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤
 4. –í–æ–∑–≤—Ä–∞—Ç –≤–µ—Å–æ–≤ for –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å—Ö–æ–¥—Å—Ç–≤–æ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏
 2. –õ—É—á—à–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
 3. –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
 4. –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã–µ –≤–µ—Å–∞

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. dependency from –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤
 2. –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º
 3. –ú–æ–∂–µ—Ç not Working—Ç—å for –º–∞–ª–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–æ–≤
 """
 from sklearn.cluster import KMeans, AgglomerativeClustering
 from sklearn.preprocessing import StandardScaler

 # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
 scaler = StandardScaler()
 returns_scaled = scaler.fit_transform(returns)

 # –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
 if method == 'kmeans':
 clusterer = KMeans(n_clusters=n_clusters, random_state=42)
 elif method == 'hierarchical':
 clusterer = AgglomerativeClustering(n_clusters=n_clusters)
 else:
 raise ValueError(f"Unknown clustering method: {method}")

 clusters = clusterer.fit_predict(returns_scaled)

 # create Portfolio for –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞
 Portfolio_weights = {}

 for cluster_id in range(n_clusters):
 cluster_returns = returns[clusters == cluster_id]

 if len(cluster_returns) > 1:
 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
 cluster_cov = np.cov(cluster_returns.T)
 cluster_expected_returns = np.mean(cluster_returns, axis=0)

 # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
 cluster_weights = minimum_variance_optimization(cluster_cov)

 # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤
 cluster_weights = cluster_weights / np.sum(cluster_weights)

 Portfolio_weights[cluster_id] = {
 'weights': cluster_weights,
 'assets': cluster_returns.columns[clusters == cluster_id].toList()
 }

 return Portfolio_weights

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
clustering_Portfolio = clustering_Portfolio_optimization(returns, n_clusters=5, method='kmeans')
```

**ML-based Portfolio Optimization:**

```python
def ml_Portfolio_optimization(returns, features, model, n_Portfolios=1000):
 """
 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio with –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

 –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ML-–º–æ–¥–µ–ª–∏ for –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –∞–∫—Ç–∏–≤–æ–≤,
 –∞ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ Portfolio and –≤—ã–±–∏—Ä–∞–µ—Ç –ª—É—á—à–∏–π on –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –®–∞—Ä–ø–∞.
 –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ dependencies in –¥–∞–Ω–Ω—ã—Ö.

 Parameters:
 -----------
 returns : pandas.dataFrame, shape (n_periods, n_assets)
 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –∞–∫—Ç–∏–≤–æ–≤. –°—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã,
 —Å—Ç–æ–ª–±—Ü—ã - –∞–∫—Ç–∏–≤—ã. data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å in —Ñ–æ—Ä–º–∞—Ç–µ pandas dataFrame
 with index–∞–º–∏ –¥–∞—Ç and –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∞–∫—Ç–∏–≤–æ–≤ in —Å—Ç–æ–ª–±—Ü–∞—Ö.
 example: dataFrame with index–∞–º–∏ –¥–∞—Ç and —Å—Ç–æ–ª–±—Ü–∞–º–∏ ['AAPL', 'GOOGL', 'MSFT', 'TSLA']

 features : pandas.dataFrame, shape (n_periods, n_features)
 –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ for ML-–º–æ–¥–µ–ª–∏. –°—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã,
 —Å—Ç–æ–ª–±—Ü—ã - –ø—Ä–∏–∑–Ω–∞–∫–∏. –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å Technical –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã,
 –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ data, –Ω–æ–≤–æ—Å—Ç–Ω—ã–µ data and —Ç.–¥.
 example: dataFrame with –ø—Ä–∏sign–º–∏ ['RSI', 'MACD', 'Volume', 'GDP_growth']

 model : sklearn-compatible model
 –û–±—É—á–µ–Ω–Ω–∞—è ML-–º–æ–¥–µ–ª—å for –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π. –î–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å –º–µ—Ç–æ–¥—ã
 fit() and predict(). –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏:
 - RandomForestRegressor: –•–æ—Ä–æ—à–æ Working–µ—Ç with –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
 - XGBRegressor: –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—é
 - LinearRegression: –ü—Ä–æ—Å—Ç–∞—è and –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å
 - LSTM/GRU: for –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö)

 n_Portfolios : int, default=1000
 –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Portfolio for –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ and –æ—Ü–µ–Ω–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
 - 100-500: –ë—ã—Å—Ç—Ä—ã–π –∞–Ω–∞–ª–∏–∑, –Ω–∏–∑–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å
 - 1000: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ö–æ—Ä–æ—à–∏–π –±–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ and —Ç–æ—á–Ω–æ—Å—Ç–∏
 - 5000-10000: –í—ã—Å–æ–∫–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å, –º–µ–¥–ª–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑
 - –ë–æ–ª—å—à–µ Portfolio: –ª—É—á—à–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏–π

 Returns:
 --------
 tuple
 (best_Portfolio, all_Portfolios)

 best_Portfolio : dict
 –õ—É—á—à–∏–π Portfolio on –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –®–∞—Ä–ø–∞ with –∫–ª—é—á–∞–º–∏:
 - 'weights': array-like, shape (n_assets,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤
 - 'return': float
 –û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 - 'variance': float
 –î–∏—Å–ø–µ—Ä—Å–∏—è Portfolio
 - 'sharpe': float
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞ Portfolio

 all_Portfolios : List
 List all —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö Portfolio with —Ç–µ–º–∏ –∂–µ –∫–ª—é—á–∞–º–∏,
 —á—Ç–æ and best_Portfolio

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö not —Å–æ–≤–ø–∞–¥–∞—é—Ç or –º–æ–¥–µ–ª—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

 Notes:
 ------
 –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:
 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö on train/test (80/20)
 2. –û–±—É—á–µ–Ω–∏–µ ML-–º–æ–¥–µ–ª–∏ on –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 3. Prediction –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π on tests—ã—Ö –¥–∞–Ω–Ω—ã—Ö
 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è n_Portfolios —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–µ—Å–æ–≤
 5. –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ for –∫–∞–∂–¥–æ–≥–æ Portfolio
 6. –í—ã–±–æ—Ä Portfolio with –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –®–∞—Ä–ø–∞

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –£—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ dependencies
 2. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
 3. –ê–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω—è—é—â–∏–º—Å—è —É—Å–ª–æ–≤–∏—è–º —Ä—ã–Ω–∫–∞
 4. –ú–æ–∂–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –¢—Ä–µ–±—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö and –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
 2. –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å—Å—è on –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 3. –°–ª–æ–∂–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
 4. dependency from –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ and –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
 """
 from sklearn.ensemble import RandomForestRegressor
 from sklearn.model_selection import train_test_split

 # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
 X = features
 y = returns

 # –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ on train/test
 X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

 # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
 model.fit(X_train, y_train)

 # –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
 Predictions = model.predict(X_test)

 # create –º–Ω–æ–∂–µ—Å—Ç–≤–∞ Portfolio
 Portfolios = []

 for i in range(n_Portfolios):
 # –°–ª—É—á–∞–π–Ω—ã–µ –≤–µ—Å–∞
 weights = np.random.dirichlet(np.ones(len(returns.columns)))

 # –û–∂–∏–¥–∞–µ–º–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 Portfolio_return = np.dot(weights, Predictions.mean(axis=0))

 # –†–∏—Å–∫ Portfolio
 Portfolio_variance = np.dot(weights, np.dot(Predictions.cov(), weights))

 # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
 sharpe = Portfolio_return / np.sqrt(Portfolio_variance)

 Portfolios.append({
 'weights': weights,
 'return': Portfolio_return,
 'variance': Portfolio_variance,
 'sharpe': sharpe
 })

 # –í—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ Portfolio
 best_Portfolio = max(Portfolios, key=lambda x: x['sharpe'])

 return best_Portfolio, Portfolios

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
best_Portfolio, all_Portfolios = ml_Portfolio_optimization(returns, features, model)
```

## –ú–µ—Ç–æ–¥—ã –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

### üåê –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ Portfolio

```mermaid
graph TD
 A[–°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏] --> B[–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è]
 A --> C[–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥—ã]
 A --> D[–§–∞–∫—Ç–æ—Ä–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è]

 B --> B1[–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>–†–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞–Ω—ã and —Ä–µ–≥–∏–æ–Ω—ã]
 B --> B2[–°–µ–∫—Ç–æ—Ä–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>–†–∞–∑–ª–∏—á–Ω—ã–µ –æ—Ç—Ä–∞—Å–ª–∏ —ç–∫–æ–Ω–æ–º–∏–∫–∏]
 B --> B3[–í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>Dollar-cost averaging]
 B --> B4[–ö–ª–∞—Å—Å–æ–≤–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>Stocks, Bonds, REITs, Commodities]

 C --> C1[–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>–ù–∏–∑–∫–∏–µ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –∞–∫—Ç–∏–≤–∞–º–∏]
 C --> C2[–§–∞–∫—Ç–æ—Ä–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>–†–∞–∑–ª–∏—á–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞]
 C --> C3[–°—Ç–∏–ª–µ–≤–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>Value, Growth, Momentum, Quality]
 C --> C4[–†–∞–∑–º–µ—Ä–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>Large, Mid, Small cap]

 D --> D1[Fama-French —Ñ–∞–∫—Ç–æ—Ä—ã<br/>Market, Size, Value]
 D --> D2[–ú–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã<br/>Interest rates, Inflation, GDP]
 D --> D3[Technical —Ñ–∞–∫—Ç–æ—Ä—ã<br/>Momentum, Volatility, Liquidity]
 D --> D4[–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã<br/>P/E, P/B, ROE, Debt/Equity]

 B1 --> E[–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on —Å—Ç—Ä–∞–Ω–∞–º<br/>max_weight_per_country ‚â§ 30%]
 B2 --> F[–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on —Å–µ–∫—Ç–æ—Ä–∞–º<br/>max_weight_per_sector ‚â§ 25%]
 C1 --> G[–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è<br/>max_correlation ‚â§ 0.7]
 C2 --> H[–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –∫ —Ñ–∞–∫—Ç–æ—Ä—É<br/>max_factor_exposure ‚â§ 0.5]

 E --> I[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤]
 F --> I
 G --> I
 H --> I

 I --> J[–î–∏–≤–µ—Ä—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Portfolio]
 J --> K[–°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤<br/>lower Portfolio volatility]
 J --> L[improve Sharpe ratio<br/>Better risk-adjusted returns]
 J --> M[–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —à–æ–∫–∞–º<br/>Resilience to market shocks]

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#fff3e0
 style D fill:#f3e5f5
 style J fill:#4caf50
```

### 1. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

**–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**

```python
def geographic_diversification(returns_by_country, max_weight_per_country=0.3):
 """
 –ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è Portfolio

 –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç Portfolio with —É—á–µ—Ç–æ–º –≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
 –∞–∫—Ç–∏–≤–æ–≤, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å on –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω—É. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç
 —Å–Ω–∏–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–æ–≤—ã–µ —Ä–∏—Å–∫–∏ and —É–ª—É—á—à–∏—Ç—å –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—é.

 Parameters:
 -----------
 returns_by_country : dict
 –°–ª–æ–≤–∞—Ä—å with –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ on —Å—Ç—Ä–∞–Ω–∞–º. –ö–ª—é—á–∏ - –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω,
 –∑–Ω–∞—á–µ–Ω–∏—è - pandas.Series with –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ –∞–∫—Ç–∏–≤–æ–≤ in —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–µ.
 –§–æ—Ä–º–∞—Ç: {'USA': returns_usa, 'EU': returns_eu, 'Asia': returns_asia}
 –≥–¥–µ returns_usa - Series with –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—è–º–∏ –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏—Ö –∞–∫—Ç–∏–≤–æ–≤

 max_weight_per_country : float, default=0.3
 –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å on –æ–¥–Ω—É —Å—Ç—Ä–∞–Ω—É in Portfolio. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
 - 0.2: –í—ã—Å–æ–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 20% on —Å—Ç—Ä–∞–Ω—É)
 - 0.3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 30% on —Å—Ç—Ä–∞–Ω—É)
 - 0.4: –£–º–µ—Ä–µ–Ω–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 40% on —Å—Ç—Ä–∞–Ω—É)
 - 0.5: –ù–∏–∑–∫–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (–º–∞–∫—Å–∏–º—É–º 50% on —Å—Ç—Ä–∞–Ω—É)
 - –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å in –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0, 1]

 Returns:
 --------
 array-like, shape (n_countries,)
 –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –≤–µ—Å–∞ —Å—Ç—Ä–∞–Ω in Portfolio. –°—É–º–º–∞ –≤–µ—Å–æ–≤ —Ä–∞–≤–Ω–∞ 1.0.
 –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ–ª—é –∫–∞–ø–∏—Ç–∞–ª–∞, –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ
 in –∞–∫—Ç–∏–≤—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω—ã.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è not —É–¥–∞–ª–∞—Å—å or parameters –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

 Notes:
 ------
 –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:
 1. –†–∞—Å—á–µ—Ç –æ–∂–∏–¥–∞–µ–º—ã—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π on —Å—Ç—Ä–∞–Ω–∞–º
 2. –†–∞—Å—á–µ—Ç –∫–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–æ–π –º–∞—Ç—Ä–∏—Ü—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∞–º–∏
 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è with –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ on –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å on —Å—Ç—Ä–∞–Ω—É
 4. –í–æ–∑–≤—Ä–∞—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Å–æ–≤ —Å—Ç—Ä–∞–Ω

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –°–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–æ–≤—ã—Ö —Ä–∏—Å–∫–æ–≤
 2. improve –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
 3. –£—á–µ—Ç —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π
 4. –ó–∞—â–∏—Ç–∞ from –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∫—Ä–∏–∑–∏—Å–æ–≤

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –ú–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
 2. not —É—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∞–º–∏
 3. –¢—Ä–µ–±—É–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö on —Å—Ç—Ä–∞–Ω–∞–º
 4. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º for –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
 """
 n_countries = len(returns_by_country)

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on —Å—Ç—Ä–∞–Ω–∞–º
 constraints = []
 bounds = []

 for i in range(n_countries):
 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å on —Å—Ç—Ä–∞–Ω—É
 constraints.append({
 'type': 'ineq',
 'fun': lambda w, i=i: max_weight_per_country - w[i]
 })
 bounds.append((0, max_weight_per_country))

 # –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 1
 constraints.append({'type': 'eq', 'fun': lambda w: np.sum(w) - 1})

 # –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ on —Å—Ç—Ä–∞–Ω–∞–º
 expected_returns = np.array([returns.mean() for returns in returns_by_country.values()])

 # –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
 cov_matrix = np.cov([returns for returns in returns_by_country.values()])

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 from scipy.optimize import minimize

 def objective(w):
 Portfolio_return = np.dot(w, expected_returns)
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 return -Portfolio_return + 0.5 * Portfolio_variance

 x0 = np.ones(n_countries) / n_countries

 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
country_weights = geographic_diversification(returns_by_country, max_weight_per_country=0.3)
```

**–°–µ–∫—Ç–æ—Ä–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è:**

```python
def sectoral_diversification(returns_by_sector, max_weight_per_sector=0.25):
 """–°–µ–∫—Ç–æ—Ä–∞–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è Portfolio"""
 n_sectors = len(returns_by_sector)

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on —Å–µ–∫—Ç–æ—Ä–∞–º
 constraints = []
 bounds = []

 for i in range(n_sectors):
 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å on —Å–µ–∫—Ç–æ—Ä
 constraints.append({
 'type': 'ineq',
 'fun': lambda w, i=i: max_weight_per_sector - w[i]
 })
 bounds.append((0, max_weight_per_sector))

 # –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 1
 constraints.append({'type': 'eq', 'fun': lambda w: np.sum(w) - 1})

 # –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ on —Å–µ–∫—Ç–æ—Ä–∞–º
 expected_returns = np.array([returns.mean() for returns in returns_by_sector.values()])

 # –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
 cov_matrix = np.cov([returns for returns in returns_by_sector.values()])

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 from scipy.optimize import minimize

 def objective(w):
 Portfolio_return = np.dot(w, expected_returns)
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 return -Portfolio_return + 0.5 * Portfolio_variance

 x0 = np.ones(n_sectors) / n_sectors

 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
sector_weights = sectoral_diversification(returns_by_sector, max_weight_per_sector=0.25)
```

### 2. –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥—ã –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏

**Factor-based Diversification:**

```python
def factor_diversification(returns, factors, max_factor_exposure=0.5):
 """–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è on basis —Ñ–∞–∫—Ç–æ—Ä–æ–≤"""
 from sklearn.linear_model import LinearRegression

 n_assets = len(returns.columns)
 n_factors = len(factors.columns)

 # –†–µ–≥—Ä–µ—Å—Å–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π on —Ñ–∞–∫—Ç–æ—Ä—ã
 factor_Loadings = np.zeros((n_assets, n_factors))

 for i, asset in enumerate(returns.columns):
 model = LinearRegression()
 model.fit(factors, returns[asset])
 factor_Loadings[i] = model.coef_

 # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è on —Ñ–∞–∫—Ç–æ—Ä–∞–º
 constraints = []
 bounds = [(0, 1) for _ in range(n_assets)]

 for j in range(n_factors):
 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç–∫—Å–ø–æ–∑–∏—Ü–∏—è –∫ —Ñ–∞–∫—Ç–æ—Ä—É
 constraints.append({
 'type': 'ineq',
 'fun': lambda w, j=j: max_factor_exposure - np.dot(w, factor_Loadings[:, j])
 })
 constraints.append({
 'type': 'ineq',
 'fun': lambda w, j=j: max_factor_exposure + np.dot(w, factor_Loadings[:, j])
 })

 # –°—É–º–º–∞ –≤–µ—Å–æ–≤ = 1
 constraints.append({'type': 'eq', 'fun': lambda w: np.sum(w) - 1})

 # –û–∂–∏–¥–∞–µ–º—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏
 expected_returns = returns.mean().values

 # –ö–æ–≤–∞—Ä–∏–∞—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
 cov_matrix = returns.cov().values

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
 from scipy.optimize import minimize

 def objective(w):
 Portfolio_return = np.dot(w, expected_returns)
 Portfolio_variance = np.dot(w, np.dot(cov_matrix, w))
 return -Portfolio_return + 0.5 * Portfolio_variance

 x0 = np.ones(n_assets) / n_assets

 result = minimize(objective, x0, method='SLSQP', bounds=bounds, constraints=constraints)

 if result.success:
 return result.x
 else:
 raise ValueError("Optimization failed")

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
factor_weights = factor_diversification(returns, factors, max_factor_exposure=0.5)
```

**Correlation-based Diversification:**

```python
def correlation_diversification(returns, max_correlation=0.7):
 """–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è on basis –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π"""
 # –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –º–∞—Ç—Ä–∏—Ü–∞
 corr_matrix = returns.corr()

 # –ü–æ–∏—Å–∫ –∞–∫—Ç–∏–≤–æ–≤ with –Ω–∏–∑–∫–æ–π –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–µ–π
 selected_assets = []
 remaining_assets = List(returns.columns)

 # –í—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ –∞–∫—Ç–∏–≤–∞
 first_asset = remaining_assets[0]
 selected_assets.append(first_asset)
 remaining_assets.remove(first_asset)

 # –í—ã–±–æ—Ä –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
 while remaining_assets:
 best_asset = None
 best_score = -1

 for asset in remaining_assets:
 # –°—Ä–µ–¥–Ω—è—è –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—è with —É–∂–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∞–∫—Ç–∏–≤–∞–º–∏
 avg_correlation = corr_matrix.loc[asset, selected_assets].mean()

 # –û—Ü–µ–Ω–∫–∞ –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
 diversification_score = 1 - avg_correlation

 if diversification_score > best_score:
 best_score = diversification_score
 best_asset = asset

 if best_asset and best_score > (1 - max_correlation):
 selected_assets.append(best_asset)
 remaining_assets.remove(best_asset)
 else:
 break

 # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–µ—Å–æ–≤ for –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∞–∫—Ç–∏–≤–æ–≤
 selected_returns = returns[selected_assets]
 expected_returns = selected_returns.mean().values
 cov_matrix = selected_returns.cov().values

 # –†–∞–≤–Ω—ã–µ –≤–µ—Å–∞
 weights = np.ones(len(selected_assets)) / len(selected_assets)

 return weights, selected_assets

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
weights, selected_assets = correlation_diversification(returns, max_correlation=0.7)
```

## Management —Ä–∏—Å–∫–∞–º–∏ Portfolio

### ‚ö†Ô∏è –ú–µ—Ç—Ä–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏ Portfolio

```mermaid
graph TD
 A[–ú–µ—Ç—Ä–∏–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∏—Å–∫–∞–º–∏] --> B[Value at Risk - VaR]
 A --> C[Expected Shortfall - ES]
 A --> D[–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞]
 A --> E[–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏]

 B --> B1[Historical VaR<br/>Percentile-based approach]
 B --> B2[Parametric VaR<br/>Normal distribution assumption]
 B --> B3[Monte Carlo VaR<br/>Simulation-based approach]
 B --> B4[–£—Ä–æ–≤–Ω–∏ –¥–æ–≤–µ—Ä–∏—è<br/>90%, 95%, 99%]

 C --> C1[Conditional VaR<br/>Average loss beyond VaR]
 C --> C2[Tail Risk<br/>Extreme loss scenarios]
 C --> C3[Coherent Risk Measure<br/>Subadditivity property]
 C --> C4[Regulatory Capital<br/>Basel III requirements]

 D --> D1[Peak-to-Trough<br/>Maximum decline from peak]
 D --> D2[Duration of Drawdown<br/>Time to recovery]
 D --> D3[Drawdown Frequency<br/>Number of drawdown periods]
 D --> D4[Underwater Curve<br/>Cumulative drawdown path]

 E --> E1[Volatility<br/>Standard deviation of returns]
 E --> E2[Beta<br/>Market sensitivity]
 E --> E3[Tracking Error<br/>Deviation from benchmark]
 E --> E4[Information Ratio<br/>Excess return per unit of tracking error]
 E --> E5[Sortino Ratio<br/>Downside deviation adjustment]
 E --> E6[Calmar Ratio<br/>Return to max drawdown ratio]

 B1 --> F[–†–∞—Å—á–µ—Ç —Ä–∏—Å–∫–æ–≤]
 B2 --> F
 B3 --> F
 C1 --> F
 D1 --> F
 E1 --> F

 F --> G[–û—Ü–µ–Ω–∫–∞ —Ä–∏—Å–∫–æ–≤ Portfolio]
 G --> H[VaR 95%: -2.5%<br/>ES 95%: -3.8%<br/>Max DD: -15.2%]

 H --> I[Management —Ä–∏—Å–∫–∞–º–∏]
 I --> J[–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>Position sizing based on VaR]
 I --> K[–•–µ–¥–∂–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>Derivatives for risk reduction]
 I --> L[–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è<br/>Correlation-based allocation]
 I --> M[–°—Ç–æ–ø-–ª–æ—Å—Å—ã<br/>Automatic risk controls]

 style A fill:#e3f2fd
 style B fill:#ffcdd2
 style C fill:#fff3e0
 style D fill:#f3e5f5
 style E fill:#c8e6c9
 style I fill:#4caf50
```

### 1. Value at Risk (VaR)

**Historical VaR:**

```python
def historical_var(returns, confidence_level=0.95):
 """
 –†–∞—Å—á–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ Value at Risk (VaR)

 Historical VaR - —ç—Ç–æ –º–µ—Ç–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ VaR, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π on –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö
 –¥–∞–Ω–Ω—ã—Ö –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π. –û–Ω not –¥–µ–ª–∞–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏
 –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π and –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–µ –∫–≤–∞–Ω—Ç–∏–ª–∏.

 Parameters:
 -----------
 returns : array-like, shape (n_periods,)
 –ú–∞—Å—Å–∏–≤ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π Portfolio or –∞–∫—Ç–∏–≤–∞. –ú–æ–∂–µ—Ç –±—ã—Ç—å pandas.Series
 or numpy.array. data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å in —Ñ–æ—Ä–º–∞—Ç–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
 (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.05 for 5% –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏).

 confidence_level : float, default=0.95
 –£—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è for —Ä–∞—Å—á–µ—Ç–∞ VaR. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç
 –Ω–∞–∏—Ö—É–¥—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ Analysis. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
 - 0.90: 90% —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è (–∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è 10% –Ω–∞–∏—Ö—É–¥—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
 - 0.95: 95% —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
 - 0.99: 99% —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è (–∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è 1% –Ω–∞–∏—Ö—É–¥—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
 - 0.999: 99.9% —É—Ä–æ–≤–µ–Ω—å –¥–æ–≤–µ—Ä–∏—è (–∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è 0.1% –Ω–∞–∏—Ö—É–¥—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤)
 - –ó–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å in –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0, 1)

 Returns:
 --------
 float
 Value at Risk on –∑–∞–¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ –¥–æ–≤–µ—Ä–∏—è. –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ,
 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –æ–∂–∏–¥–∞–µ–º—ã–π —É–±—ã—Ç–æ–∫ with –∑–∞–¥–∞–Ω–Ω–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é.
 –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ VaR = -0.05, —Ç–æ with –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é confidence_level
 —É–±—ã—Ç–æ–∫ not –ø—Ä–µ–≤—ã—Å–∏—Ç 5%.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ confidence_level not in –¥–∏–∞–ø–∞–∑–æ–Ω–µ (0, 1) or data –ø—É—Å—Ç—ã

 Notes:
 ------
 –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞:
 VaR = percentile(returns, (1 - confidence_level) * 100)

 –≥–¥–µ percentile - —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏–π –∫–≤–∞–Ω—Ç–∏–ª—å

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. not —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏
 2. –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ data
 3. –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–∞—Å—á–µ—Ç–∞ and –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
 4. –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –≤—ã–±—Ä–æ—Å–∞–º

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. dependency from –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
 2. not —É—á–∏—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
 3. –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º for —Ä–µ–¥–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π
 4. –¢—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –¥–∞–Ω–Ω—ã—Ö
 """
 # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
 sorted_returns = np.sort(returns)

 # index for VaR
 var_index = int((1 - confidence_level) * len(sorted_returns))

 # VaR
 var = sorted_returns[var_index]

 return var

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
var_95 = historical_var(Portfolio_returns, confidence_level=0.95)
```

**Parametric VaR:**

```python
def parametric_var(returns, confidence_level=0.95):
 """–ü–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π VaR"""
 from scipy import stats

 # parameters –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
 mean_return = returns.mean()
 std_return = returns.std()

 # Z-score for –∑–∞–¥–∞–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–æ–≤–µ—Ä–∏—è
 z_score = stats.norm.ppf(1 - confidence_level)

 # VaR
 var = mean_return + z_score * std_return

 return var

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
var_95 = parametric_var(Portfolio_returns, confidence_level=0.95)
```

**Monte Carlo VaR:**

```python
def monte_carlo_var(returns, confidence_level=0.95, n_simulations=10000):
 """Monte Carlo VaR"""
 # parameters —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
 mean_return = returns.mean()
 std_return = returns.std()

 # –°–∏–º—É–ª—è—Ü–∏–∏
 simulations = np.random.normal(mean_return, std_return, n_simulations)

 # VaR
 var = np.percentile(simulations, (1 - confidence_level) * 100)

 return var

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
var_95 = monte_carlo_var(Portfolio_returns, confidence_level=0.95, n_simulations=10000)
```

### 2. Expected Shortfall (ES)

```python
def expected_shortfall(returns, confidence_level=0.95):
 """Expected Shortfall (Conditional VaR)"""
 # VaR
 var = historical_var(returns, confidence_level)

 # –û–∂–∏–¥–∞–µ–º—ã–π —É–±—ã—Ç–æ–∫ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ VaR
 es = returns[returns <= var].mean()

 return es

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
es_95 = expected_shortfall(Portfolio_returns, confidence_level=0.95)
```

### 3. –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞

```python
def maximum_drawdown(returns):
 """–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞"""
 # –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
 cumulative_returns = (1 + returns).cumprod()

 # –°–∫–æ–ª—å–∑—è—â–∏–π –º–∞–∫—Å–∏–º—É–º
 running_max = cumulative_returns.expanding().max()

 # –ü—Ä–æ—Å–∞–¥–∫–∞
 drawdown = (cumulative_returns - running_max) / running_max

 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
 max_drawdown = drawdown.min()

 return max_drawdown

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
max_dd = maximum_drawdown(Portfolio_returns)
```

## –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ Management Portfolio

### üîÑ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ Management Portfolio

```mermaid
graph TD
 A[–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ Management Portfolio] --> B[–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞]
 A --> C[–ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ Management]
 A --> D[Monitoring and –∫–æ–Ω—Ç—Ä–æ–ª—å]

 B --> B1[–í—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞<br/>Fixed schedule: Daily, Weekly, Monthly]
 B --> B2[–ü–æ—Ä–æ–≥–æ–≤–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞<br/>When deviation > threshold]
 B --> B3[–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏<br/>Transaction costs consideration]
 B --> B4[–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞<br/>Balance between cost and benefit]

 C --> C1[Volatility-based Rebalancing<br/>Adjust based on market volatility]
 C --> C2[Momentum-based Rebalancing<br/>Follow market momentum]
 C --> C3[Regime-based Rebalancing<br/>Different strategies per market regime]
 C --> C4[ML-based Rebalancing<br/>Machine learning Predictions]

 D --> D1[Real-time Monitoring<br/>Continuous Portfolio tracking]
 D --> D2[Risk Alerts<br/>VaR, ES, Drawdown warnings]
 D --> D3[Performance Tracking<br/>Sharpe, Return, Volatility]
 D --> D4[Compliance Monitoring<br/>Regulatory constraints]

 B1 --> E[–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–æ—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏]
 B2 --> E
 C1 --> F[–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏]
 C2 --> F
 C3 --> F
 C4 --> F
 D1 --> G[–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã]
 D2 --> G
 D3 --> G
 D4 --> G

 E --> H[–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Portfolio]
 F --> H
 G --> H

 H --> I[–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≤–µ—Å–∞<br/>w_t = f(market_conditions_t)]
 I --> J[–û—Ü–µ–Ω–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏<br/>Performance vs Static Portfolio]

 J --> K{improve –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏?}
 K -->|–î–∞| L[‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ Management]
 K -->|–ù–µ—Ç| M[‚ùå –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é]

 M --> N[–ê–Ω–∞–ª–∏–∑ –ø—Ä–∏—á–∏–Ω<br/>Why dynamic Management failed?]
 N --> O[–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤<br/>Adjust thresholds, frequencies]
 O --> P[–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>Backtest updated strategy]
 P --> H

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#fff3e0
 style D fill:#f3e5f5
 style L fill:#4caf50
 style M fill:#ff9800
```

### 1. –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞

**–í—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞:**

```python
def time_based_rebalancing(returns, target_weights, rebalance_freq='M'):
 """
 –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ Portfolio in time

 –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É Portfolio —á–µ—Ä–µ–∑ –∑–∞data
 –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã, –≤–æ–∑–≤—Ä–∞—â–∞—è –≤–µ—Å–∞ –∫ —Ü–µ–ª–µ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º.
 –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∂–µ–ª–∞–µ–º–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤.

 Parameters:
 -----------
 returns : pandas.dataFrame, shape (n_periods, n_assets)
 –ú–∞—Ç—Ä–∏—Ü–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –∞–∫—Ç–∏–≤–æ–≤. –°—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã,
 —Å—Ç–æ–ª–±—Ü—ã - –∞–∫—Ç–∏–≤—ã. data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å in —Ñ–æ—Ä–º–∞—Ç–µ pandas dataFrame
 with index–∞–º–∏ –¥–∞—Ç and –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ –∞–∫—Ç–∏–≤–æ–≤ in —Å—Ç–æ–ª–±—Ü–∞—Ö.

 target_weights : array-like, shape (n_assets,)
 –¶–µ–ª–µ–≤—ã–µ –≤–µ—Å–∞ –∞–∫—Ç–∏–≤–æ–≤ in Portfolio. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–Ω–æ–º–µ—Ä–Ω—ã–π –º–∞—Å—Å–∏–≤
 or List with –≤–µ—Å–∞–º–∏ for –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–∞. –°—É–º–º–∞ –≤–µ—Å–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 1.0.
 example: [0.4, 0.3, 0.2, 0.1] for 4 –∞–∫—Ç–∏–≤–æ–≤

 rebalance_freq : str, default='M'
 –ß–∞—Å—Ç–æ—Ç–∞ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ Portfolio. –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
 - 'D': –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å)
 - 'W': –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 7 –¥–Ω–µ–π)
 - 'M': –ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π)
 - 'Q': –ö–≤–∞—Ä—Ç–∞–ª—å–Ω–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π)
 - 'Y': –ì–æ–¥–æ–≤–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ (–∫–∞–∂–¥—ã–µ 365 –¥–Ω–µ–π)

 Returns:
 --------
 pandas.Series, shape (n_periods,)
 temporary —Ä—è–¥ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ Portfolio.
 index —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç index—É –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö returns.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ —á–∞—Å—Ç–æ—Ç–∞ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ or data –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

 Notes:
 ------
 –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã:
 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–∞—Ç —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ on basis —á–∞—Å—Ç–æ—Ç—ã
 2. for –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞:
 - –ï—Å–ª–∏ –¥–∞—Ç–∞ —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏: installation –≤–µ—Å–æ–≤ = target_weights
 - –ò–Ω–∞—á–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –≤–µ—Å–æ–≤
 - –†–∞—Å—á–µ—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ Portfolio
 3. –í–æ–∑–≤—Ä–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ä—è–¥–∞ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π

 –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
 1. –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ and –ø–æ–Ω–∏–º–∞–Ω–∏—è
 2. –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
 3. –ö–æ–Ω—Ç—Ä–æ–ª—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –∏–∑–¥–µ—Ä–∂–µ–∫
 4. –ü–æ–¥—Ö–æ–¥–∏—Ç for –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

 –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
 1. –ú–æ–∂–µ—Ç not —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
 2. –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π
 3. not –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
 4. –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ
 """
 # create index–∞ for —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏
 if rebalance_freq == 'D':
 rebalance_dates = returns.index
 elif rebalance_freq == 'W':
 rebalance_dates = returns.index[::7]
 elif rebalance_freq == 'M':
 rebalance_dates = returns.index[::30]
 elif rebalance_freq == 'Q':
 rebalance_dates = returns.index[::90]
 else:
 raise ValueError(f"Unknown rebalance frequency: {rebalance_freq}")

 # –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞
 rebalanced_returns = []
 current_weights = target_weights.copy()

 for i, date in enumerate(returns.index):
 if date in rebalance_dates:
 current_weights = target_weights.copy()

 # –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 Portfolio_return = np.dot(current_weights, returns.loc[date])
 rebalanced_returns.append(Portfolio_return)

 return pd.Series(rebalanced_returns, index=returns.index)

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
rebalanced_returns = time_based_rebalancing(returns, target_weights, rebalance_freq='M')
```

**–ü–æ—Ä–æ–≥–æ–≤–∞—è —Ä–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞:**

```python
def threshold_rebalancing(returns, target_weights, threshold=0.05):
 """–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ on –ø–æ—Ä–æ–≥—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è"""
 rebalanced_returns = []
 current_weights = target_weights.copy()

 for i, date in enumerate(returns.index):
 # check –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –≤–µ—Å–æ–≤
 weight_deviation = np.abs(current_weights - target_weights)
 max_deviation = weight_deviation.max()

 if max_deviation > threshold:
 current_weights = target_weights.copy()

 # –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 Portfolio_return = np.dot(current_weights, returns.loc[date])
 rebalanced_returns.append(Portfolio_return)

 return pd.Series(rebalanced_returns, index=returns.index)

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
rebalanced_returns = threshold_rebalancing(returns, target_weights, threshold=0.05)
```

### 2. –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ Management

**Volatility-based Rebalancing:**

```python
def volatility_based_rebalancing(returns, target_weights, volatility_window=30,
 volatility_threshold=0.02):
 """–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ on basis –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏"""
 rebalanced_returns = []
 current_weights = target_weights.copy()

 for i, date in enumerate(returns.index):
 if i >= volatility_window:
 # –†–∞—Å—á–µ—Ç –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
 recent_returns = returns.iloc[i-volatility_window:i]
 volatility = recent_returns.std().mean()

 # –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏
 if volatility > volatility_threshold:
 current_weights = target_weights.copy()

 # –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 Portfolio_return = np.dot(current_weights, returns.loc[date])
 rebalanced_returns.append(Portfolio_return)

 return pd.Series(rebalanced_returns, index=returns.index)

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
rebalanced_returns = volatility_based_rebalancing(returns, target_weights,
 volatility_window=30, volatility_threshold=0.02)
```

**Momentum-based Rebalancing:**

```python
def momentum_based_rebalancing(returns, target_weights, momentum_window=20,
 momentum_threshold=0.1):
 """–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ on basis –º–æ–º–µ–Ω—Ç—É–º–∞"""
 rebalanced_returns = []
 current_weights = target_weights.copy()

 for i, date in enumerate(returns.index):
 if i >= momentum_window:
 # –†–∞—Å—á–µ—Ç –º–æ–º–µ–Ω—Ç—É–º–∞
 recent_returns = returns.iloc[i-momentum_window:i]
 momentum = recent_returns.mean().mean()

 # –†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–æ–º–µ–Ω—Ç—É–º–∞
 if abs(momentum) > momentum_threshold:
 current_weights = target_weights.copy()

 # –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å Portfolio
 Portfolio_return = np.dot(current_weights, returns.loc[date])
 rebalanced_returns.append(Portfolio_return)

 return pd.Series(rebalanced_returns, index=returns.index)

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
rebalanced_returns = momentum_based_rebalancing(returns, target_weights,
 momentum_window=20, momentum_threshold=0.1)
```

## Monitoring and –æ—Ü–µ–Ω–∫–∞ Portfolio

### üìä Monitoring and –æ—Ü–µ–Ω–∫–∞ Portfolio

```mermaid
graph TD
 A[Monitoring and –æ—Ü–µ–Ω–∫–∞ Portfolio] --> B[–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏]
 A --> C[–ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤]
 A --> D[–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è]
 A --> E[Report–Ω–æ—Å—Ç—å]

 B --> B1[–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Total Return, Annual Return]
 B --> B2[–†–∏—Å–∫-—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Sharpe Ratio, Sortino Ratio]
 B --> B3[–ü—Ä–æ—Å–∞–¥–∫–∏<br/>Max Drawdown, Drawdown Duration]
 B --> B4[–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å<br/>Volatility, Coefficient of Variation]
 B --> B5[–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å<br/>Calmar Ratio, Information Ratio]

 C --> C1[Value at Risk<br/>VaR 90%, 95%, 99%]
 C --> C2[Expected Shortfall<br/>Conditional VaR]
 C --> C3[–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑<br/>Asset correlations, Factor exposures]
 C --> C4[–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>Scenario Analysis, Monte Carlo]
 C --> C5[–†–µ–≥—É–ª—è—Ç–æ—Ä–Ω—ã–µ —Ä–∏—Å–∫–∏<br/>Basel III, Solvency II]

 D --> D1[–ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å<br/>Cumulative return chart]
 D --> D2[–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π<br/>Return distribution histogram]
 D --> D3[–ü—Ä–æ—Å–∞–¥–∫–∏<br/>Drawdown chart]
 D --> D4[–°–∫–æ–ª—å–∑—è—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏<br/>Rolling Sharpe, Volatility]
 D --> D5[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ with –±–µ–Ω—á–º–∞—Ä–∫–æ–º<br/>Portfolio vs Benchmark]
 D --> D6[–ê–Ω–∞–ª–∏–∑ –≤–∫–ª–∞–¥–∞ –∞–∫—Ç–∏–≤–æ–≤<br/>Asset contribution Analysis]

 E --> E1[–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ Report—ã<br/>Daily performance summary]
 E --> E2[–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ Report—ã<br/>Weekly risk and return Analysis]
 E --> E3[–ï–∂–µ–º–µ—Å—è—á–Ω—ã–µ Report—ã<br/>Monthly Portfolio reView]
 E --> E4[–ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ Report—ã<br/>Quarterly attribution Analysis]
 E --> E5[–ê–ª–µ—Ä—Ç—ã and notifications<br/>Risk alerts, Performance alerts]

 B1 --> F[–†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫]
 B2 --> F
 B3 --> F
 B4 --> F
 B5 --> F
 C1 --> F
 C2 --> F
 C3 --> F
 C4 --> F
 C5 --> F

 F --> G[–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏]
 G --> H[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ with —Ü–µ–ª—è–º–∏<br/>Performance vs Target]
 G --> I[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ with –±–µ–Ω—á–º–∞—Ä–∫–æ–º<br/>Performance vs Benchmark]
 G --> J[–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤<br/>Performance trends over time]

 H --> K[–û—Ü–µ–Ω–∫–∞ Portfolio]
 I --> K
 J --> K

 K --> L{Portfolio —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω?}
 L -->|–î–∞| M[‚úÖ –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é]
 L -->|–ù–µ—Ç| N[‚ùå –¢—Ä–µ–±—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏]

 N --> O[–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º<br/>Identify underperformance caUses]
 O --> P[–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏<br/>Adjust allocation, rebalance]
 P --> Q[Monitoring –∏–∑–º–µ–Ω–µ–Ω–∏–π<br/>Track improvement]
 Q --> K

 style A fill:#e3f2fd
 style B fill:#c8e6c9
 style C fill:#ffcdd2
 style D fill:#fff3e0
 style E fill:#f3e5f5
 style M fill:#4caf50
 style N fill:#ff9800
```

### 1. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
def calculate_Portfolio_metrics(returns, risk_free_rate=0.02):
 """
 –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Portfolio

 –≠—Ç–∞ function —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –Ω–∞–±–æ—Ä –º–µ—Ç—Ä–∏–∫ for –æ—Ü–µ–Ω–∫–∏
 –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Portfolio, including –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, —Ä–∏—Å–∫ and
 —Ä–∏—Å–∫-—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏.

 Parameters:
 -----------
 returns : pandas.Series or array-like, shape (n_periods,)
 temporary —Ä—è–¥ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π Portfolio. –ú–æ–∂–µ—Ç –±—ã—Ç—å pandas.Series
 with index–∞–º–∏ –¥–∞—Ç or numpy.array. data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å in —Ñ–æ—Ä–º–∞—Ç–µ
 –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.05 for 5% –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏).

 risk_free_rate : float, default=0.02
 –ë–µ–∑—Ä–∏—Å–∫–æ–≤–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ for —Ä–∞—Å—á–µ—Ç–∞ —Ä–∏—Å–∫-—Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö
 –º–µ—Ç—Ä–∏–∫. –û–±—ã—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è:
 - 0.01: 1% (–æ—á–µ–Ω—å –Ω–∏–∑–∫–∞—è —Å—Ç–∞–≤–∫–∞)
 - 0.02: 2% (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ for —Ä–∞–∑–≤–∏—Ç—ã—Ö —Ä—ã–Ω–∫–æ–≤)
 - 0.03: 3% (—É–º–µ—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞–≤–∫–∞)
 - 0.05: 5% (–≤—ã—Å–æ–∫–∞—è —Å—Ç–∞–≤–∫–∞)

 Returns:
 --------
 dict
 –°–ª–æ–≤–∞—Ä—å with –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Portfolio:

 total_return : float
 –û–±—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∑–∞ –≤–µ—Å—å –ø–µ—Ä–∏–æ–¥. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
 (1 + returns).prod() - 1

 annual_return : float
 –ì–æ–¥–æ–≤–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫
 (1 + returns).mean() ** 252 - 1 (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è 252 —Ç–æ—Ä–≥–æ–≤—ã—Ö –¥–Ω—è)

 volatility : float
 –ì–æ–¥–æ–≤–∞—è –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π).
 –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ returns.std() * sqrt(252)

 sharpe : float
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞ - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ —Ä–∏—Å–∫—É.
 –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ (annual_return - risk_free_rate) / volatility

 max_drawdown : float
 –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ - –Ω–∞–∏–±–æ–ª—å—à–µ–µ –ø–∞–¥–µ–Ω–∏–µ from –ø–∏–∫–∞ to –º–∏–Ω–∏–º—É–º–∞.
 –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –≥–¥–µ -0.15 –æ–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–æ—Å–∞–¥–∫—É 15%

 sortino : float
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°–æ—Ä—Ç–∏–Ω–æ - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫
 downside-—Ä–∏—Å–∫—É. –£—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏.

 calmar : float
 –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ö–∞–ª—å–º–∞—Ä–∞ - –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫
 –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ—Å–∞–¥–∫–µ. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å on –µ–¥–∏–Ω–∏—Ü—É —Ä–∏—Å–∫–∞.

 Raises:
 -------
 ValueError
 –ï—Å–ª–∏ data –ø—É—Å—Ç—ã or –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

 Notes:
 ------
 –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á–µ—Ç–∞:
 - Total Return: (1 + r‚ÇÅ) * (1 + r‚ÇÇ) * ... * (1 + r‚Çô) - 1
 - Annual Return: (1 + mean(r))^252 - 1
 - Volatility: std(r) * sqrt(252)
 - Sharpe: (Annual Return - Risk Free Rate) / Volatility
 - Max Drawdown: min((cumprod(1 + r) / cummax(cumprod(1 + r))) - 1)
 - Sortino: (Annual Return - Risk Free Rate) / Downside Volatility
 - Calmar: Annual Return / |Max Drawdown|

 –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫:
 - Sharpe > 1.0: –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
 - Sortino > 1.5: –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
 - Calmar > 1.0: –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
 - Max Drawdown < -0.20: –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
 """
 # –ë–∞–∑–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
 total_return = (1 + returns).prod() - 1
 annual_return = (1 + returns).mean() ** 252 - 1
 volatility = returns.std() * np.sqrt(252)

 # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
 sharpe = (annual_return - risk_free_rate) / volatility

 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
 max_drawdown = maximum_drawdown(returns)

 # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –°–æ—Ä—Ç–∏–Ω–æ
 downside_returns = returns[returns < 0]
 downside_volatility = downside_returns.std() * np.sqrt(252)
 sortino = (annual_return - risk_free_rate) / downside_volatility if downside_volatility > 0 else 0

 # –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ö–∞–ª—å–º–∞—Ä–∞
 calmar = annual_return / abs(max_drawdown) if max_drawdown != 0 else 0

 return {
 'total_return': total_return,
 'annual_return': annual_return,
 'volatility': volatility,
 'sharpe': sharpe,
 'max_drawdown': max_drawdown,
 'sortino': sortino,
 'calmar': calmar
 }

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
metrics = calculate_Portfolio_metrics(Portfolio_returns, risk_free_rate=0.02)
```

### 2. –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤

```python
def analyze_Portfolio_risks(returns, confidence_levels=[0.90, 0.95, 0.99]):
 """–ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤ Portfolio"""
 risks = {}

 for level in confidence_levels:
 # VaR
 var = historical_var(returns, level)

 # ES
 es = expected_shortfall(returns, level)

 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞
 max_dd = maximum_drawdown(returns)

 risks[level] = {
 'var': var,
 'es': es,
 'max_drawdown': max_dd
 }

 return risks

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
risks = analyze_Portfolio_risks(Portfolio_returns, confidence_levels=[0.90, 0.95, 0.99])
```

### 3. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è Portfolio

```python
def visualize_Portfolio_performance(returns, benchmark_returns=None, save_path=None):
 """–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Portfolio"""
 import matplotlib.pyplot as plt
 import seaborn as sns

 # configuration —Å—Ç–∏–ª—è
 plt.style.Use('seaborn-v0_8')
 sns.set_palette("husl")

 # create —Ñ–∏–≥—É—Ä—ã
 fig, axes = plt.subplots(2, 2, figsize=(15, 10))

 # 1. –ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å
 cumulative_returns = (1 + returns).cumprod()
 axes[0, 0].plot(cumulative_returns.index, cumulative_returns.values, label='Portfolio')

 if benchmark_returns is not None:
 benchmark_cumulative = (1 + benchmark_returns).cumprod()
 axes[0, 0].plot(benchmark_cumulative.index, benchmark_cumulative.values,
 label='–ë–µ–Ω—á–º–∞—Ä–∫', linestyle='--')

 axes[0, 0].set_title('–ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å')
 axes[0, 0].set_xlabel('–î–∞—Ç–∞')
 axes[0, 0].set_ylabel('–ö—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å')
 axes[0, 0].legend()
 axes[0, 0].grid(True)

 # 2. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
 axes[0, 1].hist(returns, bins=50, alpha=0.7, edgecolor='black')
 axes[0, 1].axvline(returns.mean(), color='red', linestyle='--',
 label=f'–°—Ä–µ–¥–Ω–µ–µ: {returns.mean():.4f}')
 axes[0, 1].set_title('–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π')
 axes[0, 1].set_xlabel('–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å')
 axes[0, 1].set_ylabel('–ß–∞—Å—Ç–æ—Ç–∞')
 axes[0, 1].legend()
 axes[0, 1].grid(True)

 # 3. –ü—Ä–æ—Å–∞–¥–∫–∞
 cumulative_returns = (1 + returns).cumprod()
 running_max = cumulative_returns.expanding().max()
 drawdown = (cumulative_returns - running_max) / running_max

 axes[1, 0].fill_between(drawdown.index, drawdown.values, 0, alpha=0.3, color='red')
 axes[1, 0].plot(drawdown.index, drawdown.values, color='red')
 axes[1, 0].set_title('–ü—Ä–æ—Å–∞–¥–∫–∞')
 axes[1, 0].set_xlabel('–î–∞—Ç–∞')
 axes[1, 0].set_ylabel('–ü—Ä–æ—Å–∞–¥–∫–∞')
 axes[1, 0].grid(True)

 # 4. –°–∫–æ–ª—å–∑—è—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞
 rolling_sharpe = returns.rolling(252).mean() / returns.rolling(252).std() * np.sqrt(252)
 axes[1, 1].plot(rolling_sharpe.index, rolling_sharpe.values)
 axes[1, 1].axhline(y=1.0, color='red', linestyle='--', label='Sharpe = 1.0')
 axes[1, 1].set_title('–°–∫–æ–ª—å–∑—è—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞')
 axes[1, 1].set_xlabel('–î–∞—Ç–∞')
 axes[1, 1].set_ylabel('–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –®–∞—Ä–ø–∞')
 axes[1, 1].legend()
 axes[1, 1].grid(True)

 plt.tight_layout()

 if save_path:
 plt.savefig(save_path, dpi=300, bbox_inches='tight')

 plt.show()

# example –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
visualize_Portfolio_performance(Portfolio_returns, benchmark_returns,
 save_path='Portfolio_performance.png')
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Management Portfolio - —ç—Ç–æ –æ—Å–Ω–æ–≤–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è and Management —Ä–∏—Å–∫–∞–º–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç:

1. **–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω—ã–π Portfolio** - —Å–Ω–∏–∑–∏—Ç—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å and —Ä–∏—Å–∫–∏
2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å** - –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ —Ä–∏—Å–∫–∞
3. **–£–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∏—Å–∫–∞–º–∏** - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏
4. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å Portfolio

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - not –∫–ª–∞–¥–∏—Ç–µ –≤—Å–µ —è–π—Ü–∞ in –æ–¥–Ω—É –∫–æ—Ä–∑–∏–Ω—É
2. **Management —Ä–∏—Å–∫–∞–º–∏** - –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–π—Ç–µ VaR and –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –ø—Ä–æ—Å–∞–¥–∫—É
3. **–†–µ–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞** - —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –≤–µ—Å–∞
4. **Monitoring** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
5. **–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å** - –ø—Ä–∏—Å–ø–æ—Å–∞–±–ª–∏–≤–∞–π—Ç–µ—Å—å –∫ –∏–∑–º–µ–Ω—è—é—â–∏–º—Å—è —É—Å–ª–æ–≤–∏—è–º

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ –æ—Å–≤–æ–µ–Ω–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Portfolio –≤—ã –≥–æ—Ç–æ–≤—ã –∫ —Å–æ–∑–¥–∞–Ω–∏—é –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç:

- [Feature Generation](./26_feature_generation_advanced.md)
- [–ë—ç–∫—Ç–µ—Å—Ç–∏–Ω–≥](./27_backtesting_methods.md)
- [Walk-forward –∞–Ω–∞–ª–∏–∑](./28_walk_forward_Analysis.md)
- [Monte Carlo —Å–∏–º—É–ª—è—Ü–∏–∏](./29_monte_carlo_simulations.md)
- Management Portfolio (—Ç–µ–∫—É—â–∞—è –≥–ª–∞–≤–∞)
